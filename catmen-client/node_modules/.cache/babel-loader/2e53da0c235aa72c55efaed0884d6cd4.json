{"ast":null,"code":"var _jsxFileName = \"/Users/hr145a/Documents/WayfairCodeBases/CatMan/catmen-client/src/views/catalog-views/catalog-details/catalog-details-view.tsx\";\nimport * as React from \"react\";\nimport { CatmanIcon } from \"../../../svg/icons/icons\";\nimport { DataGrid } from \"../../../view-components/data-grid/data-grid\";\nimport { catmanData } from \"../../../_sample-data/products-data\";\nimport { TitleArea } from \"../../../view-components/title-area/title-area\";\nimport StickyThing from \"../../../view-components/sticky-panel/sticky-panel\";\nimport { toolTipContent } from \"../../_common/tool-tip-content/content-tool-tips\";\nimport AppButton from \"../../../view-components/button/app-button\";\nimport { appColumns } from \"../../../_sample-data/columns\";\nimport { CatalogSingleProduct } from \"./single-product-view\";\nimport { TextInput } from \"../../../view-components/text-input/text-input\";\nexport class CatalogDetailsView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.initialized = false;\n    this.dataGridRef = React.createRef();\n    this.editDrawer = /*#__PURE__*/React.createElement(React.Fragment, null);\n    this.selectionSet = [];\n    this.columns = void 0;\n\n    this.closeSingleProductEdit = () => {\n      window.history.back();\n    };\n\n    this.manageSelectionSet = (selectionSet, checkBoxSelections, message) => {\n      if (checkBoxSelections.length > 0 || this.initialized === false && checkBoxSelections.length === 0 && message === \"checkbox-launched\") {\n        if (checkBoxSelections.length <= 1) {\n          this.setState({\n            editDrawerOpen: false,\n            footerOpen: true,\n            footerMode: \"default\"\n          });\n        } else if (checkBoxSelections.length > 1) {\n          this.setState({\n            editDrawerOpen: false,\n            footerOpen: true,\n            footerMode: \"multiple-selected\"\n          });\n        }\n\n        this.initialized = true;\n      } else {\n        this.setState({\n          footerOpen: false\n        });\n      }\n    };\n\n    this.columns = appColumns.getColumns();\n    this.state = {\n      productViewOpen: false,\n      editDrawerOpen: false,\n      editDrawerMaximized: false,\n      footerOpen: false,\n      footerMode: \"default\",\n      selectionSet: []\n    };\n  } //just for the fist launch of checkbox editing\n\n\n  getProductViewDrawer() {\n    if (this.props.query != \"none\" && this.props.query != null && this.props.query != undefined) {\n      return /*#__PURE__*/React.createElement(StickyThing, {\n        enterFromThisSide: \"right\",\n        lastResortClasses: \"product-view\",\n        animateIn: true,\n        heightIncludeUnits: \"100vh\",\n        widthIncludeUnits: \"100vw\",\n        stickyOpen: true,\n        bgColor: \"#CECECE\",\n        doAnimation: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 18\n        }\n      }, /*#__PURE__*/React.createElement(CatalogSingleProduct, {\n        uniqueID: this.props.query,\n        productData: catmanData.productData,\n        closeSingleProduct: this.closeSingleProductEdit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }\n      }));\n    }\n  }\n\n  getColumnLabel(colName) {\n    let columnLabel = \"\";\n\n    for (let i = 0; i < this.columns.length; i++) {\n      if (this.columns[i].columnName === colName) {\n        columnLabel = this.columns[i].columnLabel;\n      }\n    }\n\n    return columnLabel;\n  }\n\n  updateValues() {\n    console.log(\"updated\");\n  }\n\n  getEditDrawer() {\n    if (this.state.editDrawerOpen === false) {\n      return /*#__PURE__*/React.createElement(React.Fragment, null);\n    }\n\n    if (this.dataGridRef.current != null && this.dataGridRef.current != undefined) {\n      this.selectionSet = this.dataGridRef.current.selectionSet;\n    }\n\n    let inputs = [];\n    let selectedItems = [];\n\n    for (let i = 0; i < this.selectionSet.length; i++) {\n      //TODO replace specific reference to catmanData with prop\n      let row = this.selectionSet[i].row;\n      let cell = this.selectionSet[i].cell; //console.log(\"catman data\", catmanData.productData);\n\n      let productDataItem = catmanData.productData[row - 2][cell - 2];\n      selectedItems.push(productDataItem); //inputs.push( <div>{productDataItem.value}</div>)\n    }\n\n    for (let i = 0; i < selectedItems.length; i++) {\n      let input = /*#__PURE__*/React.createElement(TextInput, {\n        label: this.getColumnLabel(selectedItems[i].column),\n        currentValue: selectedItems[i].value,\n        onChangeAction: () => this.updateValues,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 18\n        }\n      });\n      inputs.push(input);\n    }\n\n    let maximize = valueCheck => {\n      if (valueCheck === true) {\n        return \"maximized\";\n      } else {\n        return \"catman-edit-default restored\";\n      }\n    };\n\n    let drawer = /*#__PURE__*/React.createElement(React.Fragment, null);\n\n    if (this.state.editDrawerOpen === true) {\n      drawer = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(StickyThing, {\n        enterFromThisSide: \"bottom\",\n        lastResortClasses: `catman-edit-drawer ${maximize(this.state.editDrawerMaximized)}`,\n        animateIn: true,\n        heightIncludeUnits: \"\",\n        widthIncludeUnits: \"\",\n        stickyOpen: true,\n        bgColor: \"#CECECE\",\n        doAnimation: true,\n        toolBar: \"none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 26\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"tool-bar\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 30\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 34\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"drawer-controls\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 34\n        }\n      }, /*#__PURE__*/React.createElement(AppButton, {\n        buttonType: \"secondary-action\",\n        buttonLabel: \"\",\n        OnClick: () => this.maximizeEditDrawer(),\n        tooltipType: \"custom\",\n        tooltip: toolTipContent.footerCancel(),\n        toolTipTimeOutInMS: 10000,\n        classes: \"tool-bar-btn icon-only-btn\",\n        iconLeft: /*#__PURE__*/React.createElement(CatmanIcon, {\n          iconName: \"icon-maximize\",\n          classes: \" \",\n          height: \"100%\",\n          width: \"100%\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 46\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 39\n        }\n      }), /*#__PURE__*/React.createElement(AppButton, {\n        buttonType: \"secondary-action\",\n        buttonLabel: \"\",\n        OnClick: () => this.closeEditDrawer(),\n        tooltipType: \"custom\",\n        tooltip: toolTipContent.footerCancel(),\n        toolTipTimeOutInMS: 10000,\n        classes: \"icon-only-btn\",\n        iconLeft: /*#__PURE__*/React.createElement(CatmanIcon, {\n          iconName: \"icon-close\",\n          classes: \" \",\n          height: \"100%\",\n          width: \"100%\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 46\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 38\n        }\n      }))), inputs));\n    }\n\n    return drawer;\n  }\n\n  maximizeEditDrawer() {\n    this.setState({\n      editDrawerMaximized: !this.state.editDrawerMaximized\n    });\n  }\n\n  closeEditDrawer() {\n    this.setState({\n      editDrawerOpen: false\n    });\n\n    if (this.dataGridRef.current != null && this.dataGridRef.current != undefined) {\n      this.dataGridRef.current.clearSelection();\n    }\n  }\n\n  openEditDrawer() {\n    this.setState({\n      editDrawerOpen: true\n    });\n  }\n\n  footerActions(action) {\n    switch (action) {\n      case \"cancel\":\n        this.setState({\n          footerOpen: false\n        });\n        this.initialized = false;\n\n        if (this.dataGridRef.current !== null && this.dataGridRef.current !== undefined) {\n          this.dataGridRef.current.clearSelection();\n        }\n\n        break;\n\n      case \"add-group\":\n        break;\n\n      case \"edit\":\n        this.setState({\n          footerOpen: false\n        });\n        this.initialized = false;\n        break;\n    }\n  }\n\n  getFooterMenu() {\n    let footer = /*#__PURE__*/React.createElement(React.Fragment, null);\n    let buttons = /*#__PURE__*/React.createElement(React.Fragment, null);\n\n    switch (this.state.footerMode) {\n      case \"default\":\n        buttons = /*#__PURE__*/React.createElement(\"div\", {\n          className: \"footer-btn-bar catman-footer\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 22\n          }\n        }, /*#__PURE__*/React.createElement(AppButton, {\n          buttonType: \"secondary-action\",\n          buttonLabel: \"Cancel\",\n          OnClick: () => this.footerActions(\"cancel\"),\n          tooltipType: \"custom\",\n          tooltip: toolTipContent.footerCancel(),\n          toolTipTimeOutInMS: 10000,\n          iconLeft: /*#__PURE__*/React.createElement(CatmanIcon, {\n            iconName: \"cancel\",\n            classes: \" \",\n            height: \"100%\",\n            width: \"100%\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 34\n            }\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 26\n          }\n        }), /*#__PURE__*/React.createElement(AppButton, {\n          buttonType: \"secondary-action\",\n          buttonLabel: \"Delete Selected\",\n          OnClick: () => this.footerActions(\"cancel\"),\n          tooltipType: \"custom\",\n          tooltip: toolTipContent.footerDelete(),\n          toolTipTimeOutInMS: 10000,\n          iconLeft: /*#__PURE__*/React.createElement(CatmanIcon, {\n            iconName: \"icon-delete\",\n            classes: \" \",\n            height: \"100%\",\n            width: \"100%\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 34\n            }\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 26\n          }\n        }), /*#__PURE__*/React.createElement(AppButton, {\n          classes: \"separate-left\",\n          buttonType: \"secondary-action\",\n          buttonLabel: \"Edit Selected\",\n          OnClick: () => this.footerActions(\"cancel\"),\n          tooltipType: \"custom\",\n          tooltip: toolTipContent.footerEditSelection(),\n          toolTipTimeOutInMS: 10000,\n          iconLeft: /*#__PURE__*/React.createElement(CatmanIcon, {\n            iconName: \"icon-edit\",\n            classes: \" \",\n            height: \"100%\",\n            width: \"100%\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 34\n            }\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 26\n          }\n        }), /*#__PURE__*/React.createElement(AppButton, {\n          classes: \" \",\n          buttonType: \"secondary-action\",\n          buttonLabel: \"Add Variant\",\n          OnClick: () => this.footerActions(\"cancel\"),\n          tooltipType: \"custom\",\n          tooltip: toolTipContent.footerAddVariant(),\n          toolTipTimeOutInMS: 10000,\n          iconLeft: /*#__PURE__*/React.createElement(CatmanIcon, {\n            iconName: \"icon-add\",\n            classes: \" \",\n            height: \"100%\",\n            width: \"100%\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 34\n            }\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 26\n          }\n        }));\n        break;\n\n      case \"multiple-selected\":\n        buttons = /*#__PURE__*/React.createElement(\"div\", {\n          className: \"footer-btn-bar catman-footer\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 22\n          }\n        }, /*#__PURE__*/React.createElement(AppButton, {\n          buttonType: \"secondary-action\",\n          buttonLabel: \"Cancel\",\n          OnClick: () => this.footerActions(\"cancel\"),\n          tooltipType: \"custom\",\n          tooltip: toolTipContent.footerCancel(),\n          toolTipTimeOutInMS: 10000,\n          tooltipXOffset: 0,\n          tooltipYOffset: 20,\n          iconLeft: /*#__PURE__*/React.createElement(CatmanIcon, {\n            iconName: \"cancel\",\n            classes: \" \",\n            height: \"100%\",\n            width: \"100%\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 34\n            }\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 26\n          }\n        }), /*#__PURE__*/React.createElement(AppButton, {\n          buttonType: \"secondary-action\",\n          buttonLabel: \"Delete Selected\",\n          OnClick: () => this.footerActions(\"cancel\"),\n          tooltipType: \"custom\",\n          tooltip: toolTipContent.footerDelete(),\n          toolTipTimeOutInMS: 10000,\n          tooltipXOffset: 0,\n          tooltipYOffset: 20,\n          iconLeft: /*#__PURE__*/React.createElement(CatmanIcon, {\n            iconName: \"icon-delete\",\n            classes: \" \",\n            height: \"100%\",\n            width: \"100%\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 34\n            }\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 26\n          }\n        }), /*#__PURE__*/React.createElement(AppButton, {\n          classes: \"separate-left\",\n          buttonType: \"secondary-action\",\n          buttonLabel: \"Edit Selected\",\n          OnClick: () => this.footerActions(\"cancel\"),\n          tooltipType: \"custom\",\n          tooltip: toolTipContent.footerEditSelection(),\n          toolTipTimeOutInMS: 10000,\n          tooltipXOffset: 0,\n          tooltipYOffset: 20,\n          iconLeft: /*#__PURE__*/React.createElement(CatmanIcon, {\n            iconName: \"icon-edit\",\n            classes: \" \",\n            height: \"100%\",\n            width: \"100%\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 34\n            }\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 26\n          }\n        }), /*#__PURE__*/React.createElement(AppButton, {\n          classes: \" \",\n          buttonType: \"secondary-action\",\n          buttonLabel: \"Make Into a Variant Group\",\n          OnClick: () => this.footerActions(\"cancel\"),\n          tooltipType: \"custom\",\n          tooltip: toolTipContent.footerCreateVariant(),\n          toolTipTimeOutInMS: 10000,\n          tooltipXOffset: 0,\n          tooltipYOffset: 20,\n          iconLeft: /*#__PURE__*/React.createElement(CatmanIcon, {\n            iconName: \"icon-add\",\n            classes: \" \",\n            height: \"100%\",\n            width: \"100%\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 34\n            }\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 26\n          }\n        }));\n        break;\n\n      case \"has-group\":\n        buttons = /*#__PURE__*/React.createElement(AppButton, {\n          buttonType: \"secondary-action\",\n          buttonLabel: \"catalog manager\",\n          OnClick: () => this.footerActions(\"cancel\"),\n          tooltipType: \"custom\",\n          tooltip: toolTipContent.mainNav(),\n          toolTipTimeOutInMS: 10000,\n          iconRight: /*#__PURE__*/React.createElement(CatmanIcon, {\n            iconName: \"down-arrow\",\n            classes: \"ui-icon\",\n            height: \"100%\",\n            width: \"100%\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 26\n            }\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 29\n          }\n        });\n    }\n\n    if (this.state.footerOpen === true) {\n      let buttonBar = /*#__PURE__*/React.createElement(React.Fragment, null);\n      footer = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(StickyThing, {\n        enterFromThisSide: \"bottom\",\n        lastResortClasses: \"catman-footer-container\",\n        animateIn: true,\n        heightIncludeUnits: \"3.75rem\",\n        widthIncludeUnits: \"100%\",\n        stickyOpen: true,\n        bgColor: \"rgba(0,0,0,0)\",\n        doAnimation: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 22\n        }\n      }, buttons));\n    }\n\n    return footer;\n  }\n\n  conditionClasses() {\n    if (this.state.editDrawerOpen === true) {\n      return \"drawer-open\";\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TitleArea, {\n      mainTitle: \"Spreadsheet View\",\n      subTitle: \"My Catalog\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 486,\n        columnNumber: 18\n      }\n    }), /*#__PURE__*/React.createElement(DataGrid, {\n      ref: this.dataGridRef,\n      data: catmanData.productData,\n      manageParentViews: () => this.openEditDrawer(),\n      selectionCallback: this.manageSelectionSet,\n      columns: appColumns.getColumns(),\n      classes: this.conditionClasses(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 18\n      }\n    }), this.getEditDrawer(), this.getFooterMenu(), this.getProductViewDrawer());\n  }\n\n}","map":{"version":3,"sources":["/Users/hr145a/Documents/WayfairCodeBases/CatMan/catmen-client/src/views/catalog-views/catalog-details/catalog-details-view.tsx"],"names":["React","CatmanIcon","DataGrid","catmanData","TitleArea","StickyThing","toolTipContent","AppButton","appColumns","CatalogSingleProduct","TextInput","CatalogDetailsView","Component","constructor","props","initialized","dataGridRef","createRef","editDrawer","selectionSet","columns","closeSingleProductEdit","window","history","back","manageSelectionSet","checkBoxSelections","message","length","setState","editDrawerOpen","footerOpen","footerMode","getColumns","state","productViewOpen","editDrawerMaximized","getProductViewDrawer","query","undefined","productData","getColumnLabel","colName","columnLabel","i","columnName","updateValues","console","log","getEditDrawer","current","inputs","selectedItems","row","cell","productDataItem","push","input","column","value","maximize","valueCheck","drawer","maximizeEditDrawer","footerCancel","closeEditDrawer","clearSelection","openEditDrawer","footerActions","action","getFooterMenu","footer","buttons","footerDelete","footerEditSelection","footerAddVariant","footerCreateVariant","mainNav","buttonBar","conditionClasses","render"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport {Navigation} from \"../../../view-components/list-menu/intra-app-navigation\";\nimport {MainHeaderArea} from \"../../_common/main-header-area/main-header-area\";\n\n//Configuration data:\nimport {mainNavConfig} from \"../../_catman-configuration/common-app-configuration\";\nimport {CatmanIcon} from \"../../../svg/icons/icons\";\nimport {ToolTipContent} from \"../../../view-components/heru-tool-tip/tool-tip-content\";\nimport {DataGrid, selectionObject} from \"../../../view-components/data-grid/data-grid\";\nimport {catmanData} from \"../../../_sample-data/products-data\";\nimport {TitleArea} from \"../../../view-components/title-area/title-area\";\nimport {Route, RouteComponentProps, Switch, useRouteMatch} from \"react-router-dom\";\nimport StickyThing from \"../../../view-components/sticky-panel/sticky-panel\";\nimport {ReactElement} from \"react\";\nimport {iDataGridItem} from \"../../../view-components/data-grid/data-types-for-data-grid\";\nimport {toolTipContent} from \"../../_common/tool-tip-content/content-tool-tips\";\nimport AppButton from \"../../../view-components/button/app-button\";\nimport {appColumns, iColumn} from \"../../../_sample-data/columns\";\nimport {CatalogSingleProduct} from \"./single-product-view\";\nimport {TextInput} from \"../../../view-components/text-input/text-input\";\nimport app from \"../../../../../catmen-server/src/Server\";\n\n\n\ninterface iPROPS   {\n    message: string;\n    query:string | null;\n}\n\ninterface iSTATE{\n    productViewOpen : boolean;\n    editDrawerOpen : boolean;\n    editDrawerMaximized : boolean;\n    footerOpen : boolean;\n    footerMode : \"default\" | \"has-group\" | \"no-group\" | \"multiple-selected\" ;\n    selectionSet : selectionObject[]\n}\n\nexport class CatalogDetailsView extends React.Component<iPROPS, iSTATE>{\n     constructor(props:iPROPS) {\n         super(props);\n         this.columns = appColumns.getColumns();\n         this.state = {\n             productViewOpen : false,\n             editDrawerOpen : false,\n             editDrawerMaximized : false,\n             footerOpen : false,\n             footerMode : \"default\",\n             selectionSet : [],\n         }\n     }\n\n     //just for the fist launch of checkbox editing\n     initialized:boolean = false;\n     dataGridRef = React.createRef<DataGrid>();\n     editDrawer : ReactElement = (<></>);\n     selectionSet : selectionObject[] = [];\n     columns : iColumn[];\n\n\n    closeSingleProductEdit = ()=>{\n        window.history.back();\n    };\n\n     getProductViewDrawer( ){\n         if(this.props.query != \"none\" && this.props.query != null && this.props.query != undefined ){\n\n\n\n\n             return(\n                 <StickyThing\n                     enterFromThisSide=\"right\"\n                     lastResortClasses={\"product-view\"}\n                     animateIn={true}\n                     heightIncludeUnits=\"100vh\"\n                     widthIncludeUnits={\"100vw\"}\n                     stickyOpen={true}\n                     bgColor={\"#CECECE\"}\n                     doAnimation={true}\n                 >\n                    <CatalogSingleProduct\n                        uniqueID={this.props.query}\n                        productData={catmanData.productData}\n                        closeSingleProduct={this.closeSingleProductEdit}\n                    />\n\n                 </StickyThing>\n             )\n         }\n     }\n\n     getColumnLabel(colName : string) : string{\n\n         let columnLabel = \"\";\n         for(let i = 0; i < this.columns.length; i++){\n             if(this.columns[i].columnName === colName){\n                 columnLabel = this.columns[i].columnLabel;\n             }\n         }\n\n         return columnLabel;\n     }\n\n     updateValues(){\n         console.log(\"updated\");\n     }\n\n     getEditDrawer():ReactElement{\n\n         if(this.state.editDrawerOpen === false){\n             return(<></>);\n         }\n         if(this.dataGridRef.current != null && this.dataGridRef.current != undefined ){\n             this.selectionSet = this.dataGridRef.current.selectionSet;\n         }\n\n         let inputs : ReactElement[] = [];\n        let selectedItems : iDataGridItem[] = [];\n\n         for(let i=0; i < this.selectionSet.length; i++){\n\n             //TODO replace specific reference to catmanData with prop\n             let row = this.selectionSet[i].row;\n             let cell = this.selectionSet[i].cell;\n             //console.log(\"catman data\", catmanData.productData);\n             let productDataItem = catmanData.productData[row-2][cell-2];\n             selectedItems.push(productDataItem);\n             //inputs.push( <div>{productDataItem.value}</div>)\n         }\n\n\n\n         for( let i=0; i < selectedItems.length; i++){\n             let input = (\n                 <TextInput\n                 label={this.getColumnLabel( selectedItems[i].column )}\n                 currentValue={ selectedItems[i].value}\n                 onChangeAction={()=>this.updateValues}\n                 />\n             );\n\n             inputs.push(input)\n         }\n\n        let maximize = (valueCheck : boolean)=>{\n             if(valueCheck === true){\n                 return \"maximized\"\n             }else{\n                 return \"catman-edit-default restored\"\n             }\n        };\n\n         let drawer = (<></>);\n             if(this.state.editDrawerOpen === true){\n                 drawer = (\n                     <>\n                         <StickyThing\n                             enterFromThisSide=\"bottom\"\n                             lastResortClasses={`catman-edit-drawer ${maximize(this.state.editDrawerMaximized)}`}\n                             animateIn={true}\n                             heightIncludeUnits=\"\"\n                             widthIncludeUnits={\"\"}\n                             stickyOpen={true}\n                             bgColor={\"#CECECE\"}\n                             doAnimation={true}\n                             toolBar=\"none\"\n                         >\n                             <div className={\"tool-bar\"}>\n                                 <div></div>\n                                 <div className=\"drawer-controls\">\n                                      <AppButton\n                                         buttonType={\"secondary-action\"}\n                                         buttonLabel=\"\"\n                                         OnClick={()=>this.maximizeEditDrawer()}\n                                         tooltipType=\"custom\"\n                                         tooltip={toolTipContent.footerCancel()}\n                                         toolTipTimeOutInMS={10000}\n                                         classes=\"tool-bar-btn icon-only-btn\"\n                                         iconLeft={\n                                             <CatmanIcon\n                                                 iconName=\"icon-maximize\"\n                                                 classes=\" \"\n                                                 height=\"100%\"\n                                                 width=\"100%\"\n                                             />\n                                         }\n                                     />\n                                     <AppButton\n                                         buttonType={\"secondary-action\"}\n                                         buttonLabel=\"\"\n                                         OnClick={()=>this.closeEditDrawer()}\n                                         tooltipType=\"custom\"\n                                         tooltip={toolTipContent.footerCancel()}\n                                         toolTipTimeOutInMS={10000}\n                                         classes=\"icon-only-btn\"\n                                         iconLeft={\n                                             <CatmanIcon\n                                                 iconName=\"icon-close\"\n                                                 classes=\" \"\n                                                 height=\"100%\"\n                                                 width=\"100%\"\n                                             />\n                                         }\n                                     />\n\n                                 </div>\n                             </div>\n\n                             {inputs}\n                         </StickyThing>\n                     </>\n                 );\n             }\n         return drawer;\n     }\n\n     maximizeEditDrawer(){\n         this.setState({editDrawerMaximized : !this.state.editDrawerMaximized})\n     }\n\n     closeEditDrawer(){\n         this.setState({editDrawerOpen : false});\n         if(this.dataGridRef.current != null && this.dataGridRef.current != undefined){\n             this.dataGridRef.current.clearSelection();\n         }\n     }\n\n     openEditDrawer( ){\n         this.setState({editDrawerOpen : true});\n\n\n\n     }\n\n     footerActions(action : \"cancel\" | \"add-group\" | \"edit\"){\n         switch (action) {\n             case \"cancel\":\n\n                 this.setState({footerOpen : false});\n                 this.initialized = false;\n                 if(this.dataGridRef.current !== null && this.dataGridRef.current !== undefined){\n                     this.dataGridRef.current.clearSelection();\n                 }\n                 break;\n             case \"add-group\":\n\n                 break;\n             case \"edit\":\n\n                 this.setState({footerOpen : false});\n                 this.initialized = false;\n\n                 break;\n         }\n     }\n\n     getFooterMenu(){\n         let footer = (<></>);\n         let buttons = (<></>);\n\n         switch(this.state.footerMode){\n             case \"default\":\n                 buttons = (\n                     <div className=\"footer-btn-bar catman-footer\">\n                         <AppButton\n                             buttonType={\"secondary-action\"}\n                             buttonLabel=\"Cancel\"\n                             OnClick={()=>this.footerActions(\"cancel\")}\n                             tooltipType=\"custom\"\n                             tooltip={toolTipContent.footerCancel()}\n                             toolTipTimeOutInMS={10000}\n                             iconLeft={\n                                 <CatmanIcon\n                                     iconName=\"cancel\"\n                                     classes=\" \"\n                                     height=\"100%\"\n                                     width=\"100%\"\n                                 />\n                             }\n                         />\n                         <AppButton\n                             buttonType={\"secondary-action\"}\n                             buttonLabel=\"Delete Selected\"\n                             OnClick={()=>this.footerActions(\"cancel\")}\n                             tooltipType=\"custom\"\n                             tooltip={toolTipContent.footerDelete()}\n                             toolTipTimeOutInMS={10000}\n                             iconLeft={\n                                 <CatmanIcon\n                                     iconName=\"icon-delete\"\n                                     classes=\" \"\n                                     height=\"100%\"\n                                     width=\"100%\"\n                                 />\n                             }\n                         />\n                         <AppButton\n                             classes={\"separate-left\"}\n                             buttonType={\"secondary-action\"}\n                             buttonLabel=\"Edit Selected\"\n                             OnClick={()=>this.footerActions(\"cancel\")}\n                             tooltipType=\"custom\"\n                             tooltip={toolTipContent.footerEditSelection()}\n                             toolTipTimeOutInMS={10000}\n                             iconLeft={\n                                 <CatmanIcon\n                                     iconName=\"icon-edit\"\n                                     classes=\" \"\n                                     height=\"100%\"\n                                     width=\"100%\"\n                                 />\n                             }\n                         />\n                         <AppButton\n                             classes={\" \"}\n                             buttonType={\"secondary-action\"}\n                             buttonLabel=\"Add Variant\"\n                             OnClick={()=>this.footerActions(\"cancel\")}\n                             tooltipType=\"custom\"\n                             tooltip={toolTipContent.footerAddVariant()}\n                             toolTipTimeOutInMS={10000}\n                             iconLeft={\n                                 <CatmanIcon\n                                     iconName=\"icon-add\"\n                                     classes=\" \"\n                                     height=\"100%\"\n                                     width=\"100%\"\n                                 />\n                             }\n                         />\n                     </div>\n                 );\n                 break;\n\n             case \"multiple-selected\":\n                 buttons = (\n                     <div className=\"footer-btn-bar catman-footer\">\n                         <AppButton\n                             buttonType={\"secondary-action\"}\n                             buttonLabel=\"Cancel\"\n                             OnClick={()=>this.footerActions(\"cancel\")}\n                             tooltipType=\"custom\"\n                             tooltip={toolTipContent.footerCancel()}\n                             toolTipTimeOutInMS={10000}\n                             tooltipXOffset={0}\n                             tooltipYOffset={20}\n                             iconLeft={\n                                 <CatmanIcon\n                                     iconName=\"cancel\"\n                                     classes=\" \"\n                                     height=\"100%\"\n                                     width=\"100%\"\n                                 />\n                             }\n                         />\n                         <AppButton\n                             buttonType={\"secondary-action\"}\n                             buttonLabel=\"Delete Selected\"\n                             OnClick={()=>this.footerActions(\"cancel\")}\n                             tooltipType=\"custom\"\n                             tooltip={toolTipContent.footerDelete()}\n                             toolTipTimeOutInMS={10000}\n                             tooltipXOffset={0}\n                             tooltipYOffset={20}\n                             iconLeft={\n                                 <CatmanIcon\n                                     iconName=\"icon-delete\"\n                                     classes=\" \"\n                                     height=\"100%\"\n                                     width=\"100%\"\n                                 />\n                             }\n                         />\n                         <AppButton\n                             classes={\"separate-left\"}\n                             buttonType={\"secondary-action\"}\n                             buttonLabel=\"Edit Selected\"\n                             OnClick={()=>this.footerActions(\"cancel\")}\n                             tooltipType=\"custom\"\n                             tooltip={toolTipContent.footerEditSelection()}\n                             toolTipTimeOutInMS={10000}\n                             tooltipXOffset={0}\n                             tooltipYOffset={20}\n                             iconLeft={\n                                 <CatmanIcon\n                                     iconName=\"icon-edit\"\n                                     classes=\" \"\n                                     height=\"100%\"\n                                     width=\"100%\"\n                                 />\n                             }\n                         />\n                         <AppButton\n                             classes={\" \"}\n                             buttonType={\"secondary-action\"}\n                             buttonLabel=\"Make Into a Variant Group\"\n                             OnClick={()=>this.footerActions(\"cancel\")}\n                             tooltipType=\"custom\"\n                             tooltip={toolTipContent.footerCreateVariant()}\n                             toolTipTimeOutInMS={10000}\n                             tooltipXOffset={0}\n                             tooltipYOffset={20}\n                             iconLeft={\n                                 <CatmanIcon\n                                     iconName=\"icon-add\"\n                                     classes=\" \"\n                                     height=\"100%\"\n                                     width=\"100%\"\n                                 />\n                             }\n                         />\n                     </div>\n                 );\n                 break;\n\n             case \"has-group\":\n                 buttons = (<AppButton\n                     buttonType={\"secondary-action\"}\n                     buttonLabel=\"catalog manager\"\n                     OnClick={()=>this.footerActions(\"cancel\")}\n                     tooltipType=\"custom\"\n                     tooltip={toolTipContent.mainNav()}\n                     toolTipTimeOutInMS={10000}\n                     iconRight={\n                         <CatmanIcon\n                             iconName=\"down-arrow\"\n                             classes=\"ui-icon\"\n                             height=\"100%\"\n                             width=\"100%\"\n                         />\n                     }\n                 />)\n         }\n\n         if(this.state.footerOpen === true){\n\n             let buttonBar : ReactElement = (<>\n             </>);\n\n             footer = (\n                 <>\n                     <StickyThing\n                         enterFromThisSide=\"bottom\"\n                         lastResortClasses={\"catman-footer-container\"}\n                         animateIn={true}\n                         heightIncludeUnits=\"3.75rem\"\n                         widthIncludeUnits={\"100%\"}\n                         stickyOpen={true}\n                         bgColor={\"rgba(0,0,0,0)\"}\n                         doAnimation={true}\n                     >\n                         {buttons}\n                     </StickyThing>\n                 </>\n             );\n         }\n         return footer;\n     }\n\n     manageSelectionSet = (selectionSet : iDataGridItem[], checkBoxSelections : number[], message : string )=>{\n        if(checkBoxSelections.length > 0 || (this.initialized === false && checkBoxSelections.length === 0 && message === \"checkbox-launched\") ){\n            if(checkBoxSelections.length <= 1){\n                this.setState({editDrawerOpen : false, footerOpen : true, footerMode: \"default\"});\n            }else if(checkBoxSelections.length > 1 ){\n                this.setState({editDrawerOpen : false, footerOpen : true, footerMode: \"multiple-selected\"});\n            }\n            this.initialized = true;\n        }else{\n            this.setState({footerOpen : false});\n        }\n\n     };\n\n     conditionClasses(){\n         if(this.state.editDrawerOpen === true){\n             return \"drawer-open\";\n         }\n     }\n\n     render(){\n\n\n         return (\n             <>\n                 <TitleArea mainTitle=\"Spreadsheet View\" subTitle=\"My Catalog\" />\n                 <DataGrid\n                     ref={this.dataGridRef}\n                     data={catmanData.productData}\n                     manageParentViews={()=>this.openEditDrawer()}\n                     selectionCallback={this.manageSelectionSet}\n                     columns={appColumns.getColumns()}\n                     classes={this.conditionClasses()}\n                 />\n                 {this.getEditDrawer() }\n                 {this.getFooterMenu() }\n                 {this.getProductViewDrawer()}\n             </>\n         )\n     }\n\n\n}\n"]},"metadata":{},"sourceType":"module"}