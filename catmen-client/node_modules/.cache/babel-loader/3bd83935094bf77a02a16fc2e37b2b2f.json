{"ast":null,"code":"var _jsxFileName = \"/Users/hr145a/Documents/WayfairCodeBases/CatMan/catmen-client/src/view-components/data-grid/data-grid.tsx\";\nimport * as React from \"react\";\nimport AppButton from \"../button/app-button\";\nimport { CatmanIcon } from \"../../svg/icons/icons\";\nimport { Tile } from \"../tiles/tile-component\";\nimport { toolTipContent } from \"../../views/_common/tool-tip-content/content-tool-tips\";\nexport class DataGrid extends React.Component {\n  constructor(props) {\n    super(props);\n    this.selectionSet = [];\n    this.numCols = void 0;\n    this.numRows = void 0;\n    this.startSelectionRow = void 0;\n    this.startSelectionCell = void 0;\n    this.cellRange = void 0;\n    this._checkedRows = [];\n\n    this.iconCheck = row => {\n      for (let i = 0; i < this.state.checkedRows.length; i++) {\n        if (row === this.state.checkedRows[i]) {\n          return \"checkbox-checked\";\n        }\n      }\n\n      return \"checkbox-unchecked\";\n    };\n\n    this.numCols = this.getNumColumns();\n    this.numRows = this.getNumRows();\n    this.state = {\n      selectionSet: [],\n      checkedRows: []\n    };\n    this.startSelectionRow = 0;\n    this.startSelectionCell = 0;\n    this.cellRange = {\n      startCell: 0,\n      endCell: 0,\n      startRow: 0,\n      endRow: 0\n    };\n  }\n\n  manageSelection(row, cell, clearSelection) {\n    if (clearSelection) {\n      this.selectionSet = [];\n    }\n\n    if (this.startSelectionRow > row) {\n      this.cellRange.startRow = row;\n      this.cellRange.endRow = this.startSelectionRow;\n    } else {\n      this.cellRange.startRow = this.startSelectionRow;\n      this.cellRange.endRow = row;\n    }\n\n    if (this.startSelectionCell > cell) {\n      this.cellRange.startCell = cell;\n      this.cellRange.endCell = this.startSelectionCell;\n    } else {\n      this.cellRange.startCell = this.startSelectionCell;\n      this.cellRange.endCell = cell;\n    } // let found : boolean = false;\n    // for(let i=0; i < this.selectionSet.length; i++){\n    //     if( this.selectionSet[i].cell === cell && this.selectionSet[i].row === row ){\n    //         this.selectionSet.splice(i, 1);\n    //         found = true;\n    //     }\n    // }\n\n\n    if (row === this.startSelectionRow && cell === this.startSelectionCell) {\n      this.selectionSet.push({\n        row: row,\n        cell: cell,\n        selected: true\n      });\n    }\n\n    console.log(\"start row: \", this.startSelectionRow, \"end row: \", row);\n    console.log(\"start cell: \", this.startSelectionCell, \"end cell: \", cell);\n\n    for (let i = this.cellRange.startRow; i < this.cellRange.endRow + 1; i++) {\n      for (let j = this.cellRange.startCell; j < this.cellRange.endCell + 1; j++) {\n        this.selectionSet.push({\n          row: i,\n          cell: j,\n          selected: true\n        });\n      }\n    }\n\n    this.setState({\n      selectionSet: this.selectionSet\n    });\n\n    if (this.props.selectionCallback !== undefined && this.props.selectionCallback !== null) {\n      let selectedItems = [];\n\n      for (let i = 0; i < this.selectionSet.length; i++) {\n        selectedItems.push(this.props.data[this.selectionSet[i].row][this.selectionSet[i].cell]);\n      }\n\n      this.props.selectionCallback(selectedItems);\n    }\n  }\n\n  checkSelected(row, cell) {\n    for (let i = 0; i < this.state.selectionSet.length; i++) {\n      if (this.state.selectionSet[i].row === row && this.state.selectionSet[i].cell === cell) {\n        return \"selected\";\n      }\n    } //if nothing is found, return false because it isn't selected\n\n\n    return \"\";\n  }\n\n  getNumColumns() {\n    //TODO swap this out to calculating total normalized columns\n    return this.props.data[0].length;\n  }\n\n  getNumRows() {\n    return this.props.data.length;\n  }\n\n  getProductUniqueID(index) {\n    for (let j = 0; j < this.props.data[index].length; j++) {\n      if (this.props.data[index][j].column === \"uniqueID\") {\n        return this.props.data[index][j].value;\n      }\n    }\n  }\n\n  mouseDownAction(row, cell) {\n    this.startSelectionCell = cell;\n    this.startSelectionRow = row;\n    console.log(this.selectionSet);\n    console.log(\"mouse down: \", row, \" \", cell);\n  }\n\n  mouseUpAction(row, cell) {\n    this.manageSelection(row, cell, true);\n    console.log(\"mouse up:\");\n    console.log(\"row: \", row, \"cell: \", cell);\n  }\n\n  manageCheckbox(row) {\n    console.log(\"checked\", row); //find if this number is in the list\n\n    let found = false;\n\n    for (let i = 0; i < this._checkedRows.length; i++) {\n      if (this._checkedRows[i] === row) {\n        //if it is in the list remove it which unchecks\n        this._checkedRows.splice(row, 1);\n\n        this.setState({\n          checkedRows: this._checkedRows\n        });\n        found = true;\n      }\n    }\n\n    if (found === false) {\n      this._checkedRows.push(row);\n\n      this.setState({\n        checkedRows: this._checkedRows\n      });\n    }\n\n    console.log(\"_checkedRows:\", this._checkedRows);\n    console.log(\"state.checkedRows:\", this.state.checkedRows);\n  }\n\n  getGridItems() {\n    let cells = [];\n\n    for (let i = 0; i < this.props.data.length; i++) {\n      for (let j = 0; j < this.props.data[i].length; j++) {\n        if (j === 0) {\n          cells.push( /*#__PURE__*/React.createElement(\"div\", {\n            className: \"cell checkbox-main\",\n            style: {\n              gridColumn: j + 1,\n              gridRow: i + 1,\n              zIndex: 100 + (this.numRows - i)\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 25\n            }\n          }, /*#__PURE__*/React.createElement(AppButton, {\n            OnClick: () => this.manageCheckbox(i),\n            buttonType: \"transparent-bg\",\n            tooltipType: \"custom\",\n            tooltip: toolTipContent.mainNav,\n            classes: `${this.iconCheck(i)}`,\n            iconCenter: /*#__PURE__*/React.createElement(CatmanIcon, {\n              iconName: `${this.iconCheck(i)}`,\n              width: \"0.5rem\",\n              height: \"100%\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 37\n              }\n            }),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 29\n            }\n          })));\n        }\n\n        let cell = /*#__PURE__*/React.createElement(\"div\", {\n          className: \"cell\",\n          style: {\n            gridColumn: j + 2,\n            gridRow: i + 1\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(Tile, {\n          tileType: \"edit-cell\",\n          tileLabel: this.props.data[i][j].value,\n          mouseDownActions: [() => this.mouseDownAction(i + 1, j + 2)],\n          mouseUpActions: [() => this.props.manageParentViews(), () => this.mouseUpAction(i + 1, j + 2)],\n          selectedClass: this.checkSelected(i + 1, j + 2),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 25\n          }\n        }));\n        cells.push(cell);\n\n        if (j === this.props.data[i].length - 1) {\n          cells.push( /*#__PURE__*/React.createElement(\"div\", {\n            className: \"cell details\",\n            style: {\n              gridColumn: j + 3,\n              gridRow: i + 1,\n              zIndex: 100 + (this.numRows - i)\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 25\n            }\n          }, /*#__PURE__*/React.createElement(AppButton, {\n            buttonType: \"nav-link\",\n            navPath: `/catalog/spreadsheet?product=${this.getProductUniqueID(i)}`,\n            tooltipType: \"custom\",\n            tooltip: toolTipContent.mainNav,\n            iconCenter: /*#__PURE__*/React.createElement(CatmanIcon, {\n              iconName: \"go-arrow\",\n              width: \"1rem\",\n              height: \"100%\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 37\n              }\n            }),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 29\n            }\n          })));\n        }\n      }\n    }\n\n    return cells;\n  }\n\n  render() {\n    let gridItems = [];\n    let columnHeaders = [];\n    let constructedGrid = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"data-grid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"viewport\",\n      style: {\n        gridTemplateColumns: `1.5rem repeat(${this.getNumColumns().toString()}, max-content) 1rem`\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 21\n      }\n    }, columnHeaders, this.getGridItems())));\n    return constructedGrid;\n  }\n\n}","map":{"version":3,"sources":["/Users/hr145a/Documents/WayfairCodeBases/CatMan/catmen-client/src/view-components/data-grid/data-grid.tsx"],"names":["React","AppButton","CatmanIcon","Tile","toolTipContent","DataGrid","Component","constructor","props","selectionSet","numCols","numRows","startSelectionRow","startSelectionCell","cellRange","_checkedRows","iconCheck","row","i","state","checkedRows","length","getNumColumns","getNumRows","startCell","endCell","startRow","endRow","manageSelection","cell","clearSelection","push","selected","console","log","j","setState","selectionCallback","undefined","selectedItems","data","checkSelected","getProductUniqueID","index","column","value","mouseDownAction","mouseUpAction","manageCheckbox","found","splice","getGridItems","cells","gridColumn","gridRow","zIndex","mainNav","manageParentViews","render","gridItems","columnHeaders","constructedGrid","gridTemplateColumns","toString"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport {ReactElement} from \"react\";\nimport {iDataGridItem} from \"./data-types-for-data-grid\";\nimport AppButton from \"../button/app-button\";\nimport {CatmanIcon} from \"../../svg/icons/icons\";\nimport {selectedStateType, Tile} from \"../tiles/tile-component\";\nimport {toolTipContent} from \"../../views/_common/tool-tip-content/content-tool-tips\";\nimport camelcase from \"camelcase\";\n\n//data grid data should be an array of arrays\n//each product is an array of attributes\ninterface iPROPS {\n    data : iDataGridItem[][];\n    manageParentViews : Function;\n    selectionCallback? : Function\n}\n\ninterface iSTATE {\n    selectionSet : selectionObject[];\n    checkedRows :number[];\n}\n\nexport type selectionObject = {\n    row : number;\n    cell : number;\n    selected : boolean;\n}\n\nexport class DataGrid extends React.Component<iPROPS, iSTATE>{\n    constructor(props:iPROPS) {\n        super(props);\n        this.numCols = this.getNumColumns();\n        this.numRows = this.getNumRows();\n        this.state = {\n            selectionSet : [],\n            checkedRows : []\n        };\n        this.startSelectionRow = 0;\n        this.startSelectionCell = 0;\n\n        this.cellRange = {\n            startCell : 0,\n            endCell : 0,\n            startRow : 0,\n            endRow : 0,\n        }\n    }\n    selectionSet : selectionObject[] = [];\n    numCols : number;\n    numRows: number;\n    startSelectionRow : number;\n    startSelectionCell : number;\n\n    cellRange : any;\n    _checkedRows : number[] = [];\n\n    manageSelection(row:number, cell:number, clearSelection : boolean){\n\n        if(clearSelection){\n            this.selectionSet = [];\n        }\n\n        if(this.startSelectionRow > row){\n            this.cellRange.startRow = row;\n            this.cellRange.endRow = this.startSelectionRow\n        }else{\n            this.cellRange.startRow = this.startSelectionRow;\n            this.cellRange.endRow = row;\n        }\n\n        if(this.startSelectionCell > cell){\n            this.cellRange.startCell = cell;\n            this.cellRange.endCell = this.startSelectionCell;\n        }else {\n            this.cellRange.startCell = this.startSelectionCell;\n            this.cellRange.endCell = cell;\n        }\n\n\n        // let found : boolean = false;\n        // for(let i=0; i < this.selectionSet.length; i++){\n        //     if( this.selectionSet[i].cell === cell && this.selectionSet[i].row === row ){\n        //         this.selectionSet.splice(i, 1);\n        //         found = true;\n        //     }\n        // }\n\n        if(row === this.startSelectionRow && cell === this.startSelectionCell){\n            this.selectionSet.push(\n                {\n                    row: row,\n                    cell: cell,\n                    selected : true\n                }\n            );\n        }\n        console.log( \"start row: \", this.startSelectionRow, \"end row: \", row);\n        console.log( \"start cell: \", this.startSelectionCell, \"end cell: \", cell);\n        for( let i = this.cellRange.startRow; i < this.cellRange.endRow+1; i++){\n            for(let j= this.cellRange.startCell; j < this.cellRange.endCell+1; j++){\n                this.selectionSet.push(\n                    {\n                        row: i,\n                        cell: j,\n                        selected : true\n                    }\n                );\n            }\n        }\n\n        this.setState({selectionSet : this.selectionSet});\n\n        if(this.props.selectionCallback !== undefined && this.props.selectionCallback !== null){\n           let selectedItems : iDataGridItem[] = [];\n            for(let i=0; i < this.selectionSet.length; i++){\n               selectedItems.push( this.props.data[this.selectionSet[i].row][this.selectionSet[i].cell]);\n           }\n\n            this.props.selectionCallback(selectedItems);\n        }\n    }\n\n    checkSelected(row:number, cell:number):selectedStateType{\n        for(let i=0; i<this.state.selectionSet.length; i++){\n            if( this.state.selectionSet[i].row === row && this.state.selectionSet[i].cell === cell){\n                return \"selected\";\n            }\n        }\n        //if nothing is found, return false because it isn't selected\n        return \"\";\n    }\n\n    getNumColumns(){\n        //TODO swap this out to calculating total normalized columns\n        return this.props.data[0].length;\n    }\n\n    getNumRows(){\n        return this.props.data.length;\n    }\n\n    getProductUniqueID(index : number){\n        for(let j=0; j < this.props.data[index].length; j++){\n            if(this.props.data[index][j].column === \"uniqueID\"){\n                return this.props.data[index][j].value;\n            }\n        }\n    }\n\n    mouseDownAction(row : number, cell:number){\n        this.startSelectionCell = cell;\n        this.startSelectionRow = row;\n        console.log(this.selectionSet);\n        console.log(\"mouse down: \", row, \" \",cell);\n    }\n\n    mouseUpAction(row:number, cell:number){\n        this.manageSelection(row, cell, true);\n        console.log(\"mouse up:\");\n        console.log(\"row: \",  row, \"cell: \", cell);\n    }\n\n    manageCheckbox(row : number){\n        console.log(\"checked\", row)\n        //find if this number is in the list\n        let found : boolean = false;\n        for(let i=0; i < this._checkedRows.length; i++){\n            if(this._checkedRows[i] === row){\n                //if it is in the list remove it which unchecks\n                this._checkedRows.splice(row, 1);\n                this.setState({checkedRows : this._checkedRows});\n                found = true;\n            }\n        }\n        if(found === false){\n            this._checkedRows.push(row);\n            this.setState({checkedRows : this._checkedRows});\n        }\n        console.log(\"_checkedRows:\", this._checkedRows);\n        console.log(\"state.checkedRows:\", this.state.checkedRows);\n    }\n\n    iconCheck = (row : number):string=>{\n        for(let i=0; i < this.state.checkedRows.length; i++){\n            if(row === this.state.checkedRows[i]){\n                return \"checkbox-checked\"\n            }\n        }\n        return \"checkbox-unchecked\"\n    };\n\n    getGridItems(){\n        let cells : ReactElement[] = [];\n        for(let i=0; i < this.props.data.length; i++){\n            for(let j=0; j < this.props.data[i].length; j++){\n                if(j === 0){ \n\n                    cells.push(\n                        <div className=\"cell checkbox-main\" style={{gridColumn : j+1, gridRow : i+1, zIndex : 100 + (this.numRows - i) }}>\n                            <AppButton\n                                OnClick={()=>this.manageCheckbox(i)}\n                                buttonType=\"transparent-bg\"\n                                tooltipType=\"custom\"\n                                tooltip={toolTipContent.mainNav}\n                                classes={`${this.iconCheck(i)}`}\n                                iconCenter={(\n                                    <CatmanIcon\n                                        iconName={`${this.iconCheck(i)}`}\n                                        width=\"0.5rem\"\n                                        height=\"100%\"\n                                    />\n                                )}\n                            />\n                        </div>\n                    )\n                }\n\n                let cell = (\n                    <div className=\"cell\" style={{gridColumn : j+2, gridRow : i+1 }}>\n                        <Tile\n                            tileType=\"edit-cell\"\n                            tileLabel={this.props.data[i][j].value}\n                            mouseDownActions={\n                                [() => this.mouseDownAction(i+1,j+2)]\n                            }\n                            mouseUpActions={\n                                [\n                                    () => this.props.manageParentViews(),\n                                    () => this.mouseUpAction(i+1,j+2)\n                                ]\n                            }\n                            selectedClass={this.checkSelected(i+1, j+2)}\n                        />\n                    </div>\n                );\n\n                cells.push(cell);\n\n                if(j === this.props.data[i].length-1){\n                    cells.push(\n                        <div className=\"cell details\" style={{gridColumn : j+3, gridRow : i+1, zIndex : 100 + (this.numRows - i) }}>\n                            <AppButton\n                                buttonType=\"nav-link\"\n                                navPath={`/catalog/spreadsheet?product=${this.getProductUniqueID(i)}`}\n                                tooltipType=\"custom\"\n                                tooltip={toolTipContent.mainNav}\n                                iconCenter={(\n                                    <CatmanIcon\n                                        iconName=\"go-arrow\"\n                                        width=\"1rem\"\n                                        height=\"100%\"\n                                    />\n                                )}\n                            />\n                        </div>\n                    )\n                }\n            }\n        }\n\n\n\n        return cells;\n    }\n\n    render(): React.ReactElement<any, string | React.JSXElementConstructor<any>> | string | number | {} | React.ReactNodeArray | React.ReactPortal | boolean | null | undefined {\n\n        let gridItems : ReactElement[] = [];\n        let columnHeaders : ReactElement[]=[];\n\n        let constructedGrid : ReactElement = (\n            <>\n                <div className=\"data-grid\">\n                    <div className=\"viewport\" style={{gridTemplateColumns : `1.5rem repeat(${this.getNumColumns().toString()}, max-content) 1rem`}}>\n                        {columnHeaders}\n                        {this.getGridItems()}\n                    </div>\n                </div>\n            </>\n        );\n\n        return constructedGrid;\n    }\n}"]},"metadata":{},"sourceType":"module"}