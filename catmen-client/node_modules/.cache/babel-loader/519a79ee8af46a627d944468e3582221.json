{"ast":null,"code":"var _jsxFileName = \"/Users/hr145a/Documents/WayfairCodeBases/CatMan/catmen-client/src/view-components/data-grid/data-grid.tsx\";\nimport * as React from \"react\";\nimport AppButton from \"../button/app-button\";\nimport { CatmanIcon } from \"../../svg/icons/icons\";\nimport { Tile } from \"../tiles/tile-component\";\nimport { toolTipContent } from \"../../views/tool-tip-content/content-tool-tips\";\nimport { ToolTipContent } from \"../heru-tool-tip/tool-tip-content\";\nimport ReactDOM from \"react-dom\";\nimport { win } from \"../../index\";\nexport class DataGrid extends React.Component {\n  constructor(props) {\n    super(props);\n    this.selectionSet = [];\n    this.selectedCells = [];\n    this.numCols = void 0;\n    this.numRows = void 0;\n    this.startSelectionRow = void 0;\n    this.startSelectionCell = void 0;\n    this.dragInterval = null;\n    this.dragCounter = 0;\n\n    this.root = () => {\n      let root = document.getElementById(\"root\");\n\n      if (root != null) {\n        return root;\n      }\n    };\n\n    this.cellRange = void 0;\n    this._checkedRows = [];\n    this.shiftDown = false;\n    this.controlDown = false;\n\n    this.iconForCheckBox = row => {\n      for (let i = 0; i < this.state.checkedRows.length; i++) {\n        if (row === this.state.checkedRows[i]) {\n          return \"checkbox-checked\";\n        }\n      }\n\n      return \"checkbox-unchecked\";\n    };\n\n    this.updateSelectionState = () => {\n      this.setState({\n        selectionSet: this.selectionSet\n      });\n    };\n\n    this.columnHeadTooltip = (tooltiptype, tooltip, header) => {\n      switch (tooltiptype) {\n        case \"basic\":\n          return /*#__PURE__*/React.createElement(ToolTipContent, {\n            header: header,\n            copy: tooltip,\n            tooltipType: \"deluxe\",\n            icon: /*#__PURE__*/React.createElement(CatmanIcon, {\n              iconName: \"info-icon-help\",\n              classes: \"\",\n              height: \"1.5rem\",\n              width: \"1.5rem\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 460,\n                columnNumber: 25\n              }\n            }),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 455,\n              columnNumber: 24\n            }\n          });\n\n        case \"custom\":\n          return tooltip;\n      }\n\n      return /*#__PURE__*/React.createElement(React.Fragment, null);\n    };\n\n    this.state = {\n      workingDataSet: this.props.data,\n      selectionSet: [],\n      checkedRows: [],\n      hoveredRow: \"\",\n      mouseIsDown: false,\n      mouseX: 0,\n      mouseY: 0,\n      initialMouseX: 0,\n      initialMouseY: 0\n    };\n    this.startSelectionRow = 0;\n    this.startSelectionCell = 0;\n    this.cellRange = {\n      startCell: 0,\n      endCell: 0,\n      startRow: 0,\n      endRow: 0\n    };\n    this.numCols = this.getNumColumns();\n    this.numRows = this.getNumRows();\n  }\n\n  manageSelection(row, cell, columnName, clearSelection) {\n    if (clearSelection) {\n      this.selectionSet = [];\n      this._checkedRows = [];\n    }\n\n    if (this.startSelectionRow > row) {\n      this.cellRange.startRow = row;\n      this.cellRange.endRow = this.startSelectionRow;\n    } else {\n      this.cellRange.startRow = this.startSelectionRow;\n      this.cellRange.endRow = row;\n    }\n\n    if (this.startSelectionCell > cell) {\n      this.cellRange.startCell = cell;\n      this.cellRange.endCell = this.startSelectionCell;\n    } else {\n      this.cellRange.startCell = this.startSelectionCell;\n      this.cellRange.endCell = cell;\n    }\n\n    if (row === this.startSelectionRow && cell === this.startSelectionCell) {\n      this.selectionSet.push({\n        row: row,\n        cell: cell,\n        selected: true,\n        columnName: this.props.columnsData[cell - 2].columnName //columnName : appColumns.getColumns[cell-2].columnName\n\n      });\n    }\n\n    for (let i = this.cellRange.startRow; i < this.cellRange.endRow + 1; i++) {\n      for (let j = this.cellRange.startCell; j < this.cellRange.endCell + 1; j++) {\n        this.selectionSet.push({\n          row: i,\n          cell: j,\n          selected: true,\n          columnName: this.props.columnsData[j - 2].columnName\n        });\n      }\n    } // handle single cell as start and end\n\n\n    if (this.selectionSet.length === 2) {\n      if (this.selectionSet[0].row === this.selectionSet[1].row && this.selectionSet[0].cell === this.selectionSet[1].cell) {\n        this.selectionSet.splice(1, 1);\n      }\n    }\n\n    this.setState({\n      selectionSet: this.selectionSet,\n      checkedRows: this._checkedRows\n    });\n\n    if (this.props.selectionCallback !== undefined && this.props.selectionCallback !== null) {\n      let selectedItems = [];\n      let lastRow = 0; // work through the selection set to organize things\n\n      i: for (let i = 0; i < this.selectionSet.length; i++) {\n        if (i === 0) {\n          //if it's the first one let's create a new entry\n          lastRow = this.selectionSet[0].row;\n          let newItem = {\n            row: lastRow,\n            cells: [],\n            productFields: []\n          };\n          selectedItems.push(newItem);\n        } //loop over the existing list of rows to create new ones\n\n\n        if (this.selectionSet[i].row === lastRow) {\n          //one more loop over the list to grab all the cells that belong to the row\n          if (selectedItems[selectedItems.length - 1].cells.length === 0) {\n            for (let j = 0; j < this.selectionSet.length; j++) {\n              if (this.selectionSet[j].row === lastRow) {\n                //if the row matches the last row, then push in the selected cell\n                selectedItems[selectedItems.length - 1].cells.push(this.selectionSet[j].cell);\n              }\n            }\n          }\n        } else {\n          lastRow = this.selectionSet[i].row;\n          let newItem = {\n            row: lastRow,\n            cells: [],\n            productFields: []\n          };\n          selectedItems.push(newItem);\n        }\n      }\n\n      for (let x = 0; x < selectedItems.length; x++) {\n        for (let y = 0; y < this.state.workingDataSet[selectedItems[x].row - 2].length; y++) {\n          selectedItems[x].productFields.push(this.state.workingDataSet[selectedItems[x].row - 2][y]);\n        }\n      }\n\n      this.props.selectionCallback(selectedItems, this._checkedRows, \"standard-launch\", row, cell);\n    }\n  }\n\n  clearSelection() {\n    this.setState({\n      selectionSet: [],\n      checkedRows: []\n    });\n    this._checkedRows = [];\n    this.selectionSet = [];\n  }\n\n  checkSelected(row, cell) {\n    for (let i = 0; i < this.state.selectionSet.length; i++) {\n      if (this.state.selectionSet[i].row === row && this.state.selectionSet[i].cell === cell) {\n        return \"selected\";\n      }\n    } //if nothing is found, return false because it isn't selected\n\n\n    return \"\";\n  }\n\n  getNumColumns() {\n    //TODO swap this out to calculating total normalized columns\n    return this.props.columnsData.length;\n  }\n\n  getNumRows() {\n    if (this.state.workingDataSet.length > 0) {\n      return this.state.workingDataSet.length;\n    } else {\n      return this.props.data.length;\n    }\n  }\n\n  getProductUniqueID(index) {\n    for (let j = 0; j < this.state.workingDataSet[index].length; j++) {\n      if (this.state.workingDataSet[index][j].columnName === \"uniqueID\") {\n        return this.state.workingDataSet[index][j].value;\n      }\n    }\n  }\n\n  mouseDownAction(row, cell) {\n    //set timer for dragging\n    this.dragInterval = window.setInterval(() => {\n      this.dragCounter++;\n      console.log(\"set interval\", this.dragInterval);\n    }, 200);\n    this.startSelectionCell = cell;\n    this.startSelectionRow = row;\n    this.setState({\n      mouseIsDown: true,\n      initialMouseX: win.mousePos.x,\n      initialMouseY: win.mousePos.y\n    });\n  }\n\n  mouseUpAction(row, cell, columnName) {\n    this.setState({\n      mouseIsDown: false\n    });\n    this.manageSelection(row, cell, columnName, true); //clear dragging timer\n\n    if (this.dragInterval != null) {\n      window.clearInterval(this.dragInterval);\n      this.dragCounter = 0;\n    }\n\n    this.manageAppCues();\n  }\n\n  hoverRowAction(row) {\n    this.setState({\n      hoveredRow: row.toString()\n    });\n  }\n\n  mouseOutRowAction() {\n    this.setState({\n      hoveredRow: \"\"\n    });\n  }\n\n  manageCheckbox(row) {\n    //find if this number is in the list\n    let found = false;\n\n    for (let i = 0; i < this._checkedRows.length; i++) {\n      if (this._checkedRows[i] === row) {\n        //if it is in the list remove it which unchecks\n        this._checkedRows.splice(i, 1);\n\n        this.setState({\n          checkedRows: this._checkedRows\n        });\n        found = true;\n      }\n    }\n\n    if (found === false) {\n      this._checkedRows.push(row);\n\n      this.setState({\n        checkedRows: this._checkedRows\n      });\n    } //handle selecting the checked\n    //First reset the cell selection\n\n\n    this.selectionSet = [];\n\n    for (let i = 0; i < this._checkedRows.length; i++) {\n      for (let j = 0; j < this.state.workingDataSet[this._checkedRows[i]].length; j++) {\n        let selectedCell = {\n          row: this._checkedRows[i] + 2,\n          cell: j + 2,\n          selected: true,\n          columnName: this.props.columnsData[j].columnName\n        };\n        this.selectionSet.push(selectedCell);\n      }\n    }\n\n    this.setState({\n      selectionSet: this.selectionSet\n    });\n\n    if (this.props.selectionCallback !== undefined) {\n      this.props.selectionCallback(this.state.selectionSet, this.state.checkedRows, \"checkbox-launched\");\n    } //once people use the tool, we can hide the tool tip\n\n\n    toolTipContent.showSelectRow = false;\n  }\n\n  switchToEditModeFromCheckBoxMode() {\n    //handle switching from checkbox mode to cell selection mode\n    //First reset the cell selection\n    console.log(\"switch to edit mode\");\n    this._checkedRows = [];\n    this.setState({\n      checkedRows: this._checkedRows\n    });\n    console.log(\"switch to edit mode\", this.selectionSet);\n    console.log(\"switch to edit mode\", this.state.selectionSet);\n\n    if (this.props.selectionCallback !== undefined) {\n      this.props.selectionCallback(this.state.selectionSet, this.state.checkedRows, \"checkbox-launched\");\n    }\n  }\n\n  getGridItems() {\n    let cells = [];\n\n    for (let i = 0; i < this.state.workingDataSet.length; i++) {\n      for (let j = 0; j < this.state.workingDataSet[i].length; j++) {\n        if (j === 0) {\n          cells.push( /*#__PURE__*/React.createElement(\"div\", {\n            id: `row-${i + 2}-start`,\n            className: `cell checkbox-main `,\n            style: {\n              gridColumn: j + 1,\n              gridRow: i + 2,\n              zIndex: 100 + (this.numRows - i)\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 25\n            }\n          }, /*#__PURE__*/React.createElement(AppButton, {\n            OnClick: () => this.manageCheckbox(i),\n            hoverActions: [() => this.hoverRowAction(i + 2)],\n            buttonType: \"transparent-bg\",\n            tooltipType: \"custom\",\n            tooltip: toolTipContent.selectRow(),\n            classes: `${this.iconForCheckBox(i)}`,\n            iconCenter: /*#__PURE__*/React.createElement(CatmanIcon, {\n              iconName: `${this.iconForCheckBox(i)}`,\n              width: \"100%\",\n              height: \"100%\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 37\n              }\n            }),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 29\n            }\n          }), /*#__PURE__*/React.createElement(CatmanIcon, {\n            classes: \"shading-l-r\",\n            iconName: \"fader-left-to-right\",\n            width: \"0.5rem\",\n            height: \"100%\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 29\n            }\n          })));\n        }\n\n        let cell = /*#__PURE__*/React.createElement(\"div\", {\n          draggable: false,\n          className: `cell row-${i + 2}`,\n          style: {\n            gridColumn: j + 2,\n            gridRow: i + 2\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(Tile, {\n          tileType: this.props.columnsData[j].control,\n          tileLabel: this.state.workingDataSet[i][j].value,\n          action: () => this.clickCellsActions(),\n          hoverActions: [() => this.hoverRowAction(i + 2)],\n          mouseOutActions: [() => this.mouseOutRowAction()],\n          mouseDownActions: [() => this.mouseDownAction(i + 2, j + 2)],\n          mouseUpActions: [() => this.props.manageParentViews(), () => this.mouseUpAction(i + 2, j + 2, this.props.columnsData[j].columnName)],\n          selectedClass: this.checkSelected(i + 2, j + 2),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 25\n          }\n        }));\n\n        if (this.props.columnsData[j].control !== \"hidden\") {\n          cells.push(cell);\n        }\n\n        if (j === this.state.workingDataSet[i].length - 1 && this.props.hasDetailsActionButton === true) {\n          cells.push( /*#__PURE__*/React.createElement(\"div\", {\n            className: \"cell details\",\n            style: {\n              gridColumn: j + 3,\n              gridRow: i + 2,\n              zIndex: 100 + (this.numRows - i)\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 421,\n              columnNumber: 25\n            }\n          }, /*#__PURE__*/React.createElement(AppButton, {\n            buttonType: \"nav-link\",\n            navPath: `/catalog/spreadsheet?product=${this.getProductUniqueID(i)}`,\n            tooltipType: \"custom\",\n            tooltip: toolTipContent.singleProduct(),\n            iconCenter: /*#__PURE__*/React.createElement(CatmanIcon, {\n              iconName: \"go-arrow\",\n              width: \"1rem\",\n              height: \"100%\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 428,\n                columnNumber: 37\n              }\n            }),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 29\n            }\n          }), /*#__PURE__*/React.createElement(CatmanIcon, {\n            classes: \"shading\",\n            iconName: \"fader-right-to-left\",\n            width: \"0.5rem\",\n            height: \"100%\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 29\n            }\n          })));\n        }\n      }\n    }\n\n    return cells;\n  }\n\n  getColumnHeaders() {\n    let columnsHeads = []; //Header checkbox for \"select all\"\n\n    for (let i = 0; i < this.props.columnsData.length; i++) {\n      var _this$props$focusedIt2;\n\n      if (i === 0) {\n        columnsHeads.push( /*#__PURE__*/React.createElement(\"div\", {\n          className: \"cell checkbox-main grid-header\",\n          style: {\n            gridColumn: i + 1,\n            gridRow: 1,\n            zIndex: 120 + this.numCols\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(AppButton, {\n          OnClick: () => this.manageCheckbox(i),\n          buttonType: \"transparent-bg\",\n          tooltipType: \"custom\",\n          tooltip: toolTipContent.selectRow(),\n          classes: ` `,\n          iconCenter: /*#__PURE__*/React.createElement(CatmanIcon, {\n            iconName: `${this.iconForCheckBox(i)}`,\n            width: \"0.5rem\",\n            height: \"100%\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 33\n            }\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 25\n          }\n        })));\n      } //Handling the something-in-column selected visual indicator\n\n\n      const columnActiveCheck = () => {\n        var _this$props$focusedIt;\n\n        if (((_this$props$focusedIt = this.props.focusedItem) === null || _this$props$focusedIt === void 0 ? void 0 : _this$props$focusedIt.cell) === i + 2 && this.props.focusedItem.editDrawerOpen === true) {\n          return {\n            tileType: \"header-active\",\n            cellClass: \"active\"\n          };\n        } else {\n          return {\n            tileType: \"column-header\",\n            cellClass: \"\"\n          };\n        }\n      };\n\n      let columnHead = /*#__PURE__*/React.createElement(\"div\", {\n        className: `cell grid-header ${columnActiveCheck().cellClass}`,\n        style: {\n          gridColumn: i + 2,\n          gridRow: 1,\n          zIndex: this.numRows + 100 + i\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Tile, {\n        tileType: columnActiveCheck().tileType,\n        tileLabel: this.props.columnsData[i].columnLabel,\n        toolTip: this.columnHeadTooltip(this.props.columnsData[i].tooltipType, this.props.columnsData[i].toolTip, this.props.columnsData[i].columnLabel),\n        toolTipTimeOut: 30000,\n        mouseDownActions: [],\n        mouseUpActions: [() => this.props.manageParentViews()],\n        selectedClass: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 513,\n          columnNumber: 21\n        }\n      }));\n\n      if (this.props.columnsData[i].control != \"hidden\") {\n        columnsHeads.push(columnHead);\n      } //final column head action\n\n\n      if (i === this.props.columnsData.length - 1) {\n        columnsHeads.push( /*#__PURE__*/React.createElement(\"div\", {\n          className: \"cell details grid-header\",\n          style: {\n            gridColumn: this.props.columnsData.length + 2,\n            gridRow: 1,\n            zIndex: 200 + this.numCols + 2\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(AppButton, {\n          buttonType: \"button-custom\",\n          classes: \"add-column\",\n          navPath: `/catalog/spreadsheet`,\n          OnClick: () => this.props.addAction(\"add-attribute\"),\n          tooltipType: \"custom\",\n          tooltip: toolTipContent.insertColumn(),\n          iconCenter: /*#__PURE__*/React.createElement(CatmanIcon, {\n            iconName: \"icon-plus\",\n            width: \"0.5rem\",\n            height: \"100%\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 553,\n              columnNumber: 33\n            }\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 545,\n            columnNumber: 25\n          }\n        }), /*#__PURE__*/React.createElement(CatmanIcon, {\n          classes: \"shading-l-r\",\n          iconName: \"fader-right-to-left\",\n          width: \"0.5rem\",\n          height: \"100%\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 560,\n            columnNumber: 25\n          }\n        })));\n      } //create the selected overlay\n\n\n      if (((_this$props$focusedIt2 = this.props.focusedItem) === null || _this$props$focusedIt2 === void 0 ? void 0 : _this$props$focusedIt2.cell) === i + 2 && this.props.focusedItem.editDrawerOpen === true) {\n        let selectedIndicator = /*#__PURE__*/React.createElement(\"div\", {\n          className: \"cell selected-indicator\",\n          style: {\n            gridColumn: i + 2,\n            gridRowStart: this.cellRange.startRow,\n            gridRowEnd: this.cellRange.endRow + 1\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 574,\n            columnNumber: 32\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"handle\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 575,\n            columnNumber: 33\n          }\n        }));\n        columnsHeads.push(selectedIndicator);\n      } else if (this.state.selectionSet.length == 0) {\n        let selectedIndicator = /*#__PURE__*/React.createElement(\"div\", {\n          className: \"cell selected-indicator\",\n          style: {\n            gridColumn: 4,\n            gridRowStart: 2,\n            gridRowEnd: 2\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 582,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"handle\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 583,\n            columnNumber: 25\n          }\n        }));\n        columnsHeads.push(selectedIndicator);\n      }\n    }\n\n    return columnsHeads;\n  } //HOVER ROW STYLE\n\n\n  gridStyles() {\n    //This let's us have a hover row effect with css grid\n    //This way we don't have to put containers around each row just for visual cue\n    let style = `\n            .row-${this.state.hoveredRow} {\n                background-color: #f4f4f5;                \n            }\n            \n            .row-${this.state.hoveredRow} .cell-editable{\n                z-index:100;\n            }\n            \n            .row-${this.state.hoveredRow} p{\n                    color: #473F4A  ;\n            }\n            `;\n    return /*#__PURE__*/React.createElement(\"style\", {\n      dangerouslySetInnerHTML: {\n        __html: `${style}`\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 615,\n        columnNumber: 16\n      }\n    });\n  }\n\n  clickCellsActions() {\n    this.setState({\n      mouseIsDown: false\n    });\n  } //DRAG AREA - create bounding box while dragging\n\n\n  getDragArea() {\n    //Only run if mouse is down\n    if (this.dragInterval != undefined) {\n      if (this.state.mouseIsDown === true) {\n        let calcStyles = () => {\n          //calculate where the drag area will draw\n          let coordinates = {\n            top: this.state.initialMouseY,\n            bottom: win.windowSize().height - this.state.mouseY,\n            left: this.state.initialMouseX,\n            right: win.windowSize().width - this.state.mouseX\n          };\n\n          if (this.state.initialMouseY <= this.state.mouseY) {\n            coordinates.top = this.state.initialMouseY;\n            coordinates.bottom = win.windowSize().height - this.state.mouseY;\n          } else if (this.state.initialMouseY >= this.state.mouseY) {\n            coordinates.top = win.mousePos.y;\n            coordinates.bottom = win.windowSize().height - this.state.initialMouseY;\n          }\n\n          if (this.state.mouseX >= this.state.initialMouseX) {\n            coordinates.left = this.state.initialMouseX;\n            coordinates.right = win.windowSize().width - this.state.mouseX;\n          } else if (this.state.mouseY >= this.state.initialMouseY) {\n            coordinates.left = win.mousePos.x;\n            coordinates.right = win.windowSize().width - this.state.initialMouseX;\n          }\n\n          if (this.state.mouseX <= this.state.initialMouseX && this.state.initialMouseY >= this.state.mouseY) {\n            coordinates.left = this.state.mouseX;\n            coordinates.right = win.windowSize().width - this.state.initialMouseX;\n          }\n\n          return coordinates;\n        };\n\n        let dragArea = /*#__PURE__*/React.createElement(\"div\", {\n          className: \"drag-area\",\n          style: calcStyles(),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 660,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"drag-inner-container\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 664,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"tool-tip\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 665,\n            columnNumber: 29\n          }\n        }, toolTipContent.clickDragGrid())));\n        return ReactDOM.createPortal(dragArea, this.root());\n      } else {\n        if (this.dragInterval != null) {\n          clearInterval(this.dragInterval);\n        }\n      }\n    }\n  } //Mouse move, this is used for defining the drag area rectangle but could be used for other stuff\n\n\n  mouseMoveActions() {\n    if (this.dragCounter % 2 == 0) {\n      this.setState({\n        mouseX: win.mousePos.x,\n        mouseY: win.mousePos.y\n      });\n    }\n  }\n\n  selectionIndicator() {\n    console.log(\"selection set\", this.state.selectionSet.length);\n    let selectedIndicator = /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cell selected-indicator\",\n      style: {\n        gridRowStart: 2,\n        gridColumnStart: 2,\n        gridRowEnd: 2,\n        gridColumnEnd: \"auto\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 692,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"handle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 693,\n        columnNumber: 21\n      }\n    }));\n    return selectedIndicator;\n  } //APP CUES aka Super tooltips\n\n\n  manageAppCues() {\n    if (this.selectionSet.length > 1) {\n      toolTipContent.gridDragTutorial++;\n    }\n  }\n\n  manageKeyBoardEffect(key, keyAction) {\n    console.log(key);\n\n    switch (key) {\n      case \"Enter\":\n        break;\n\n      case \"ArrowDown\":\n        break;\n\n      case \"ArrowUp\":\n        break;\n\n      case \"ArrowLeft\":\n        break;\n\n      case \"ArrowRight\":\n        break;\n\n      case \"Enter\":\n        this.setState({\n          selectionSet: []\n        });\n        break;\n\n      case \"Meta\":\n        if (keyAction == \"up\") {\n          this.controlDown = false;\n        } else if (keyAction == \"down\") {\n          this.controlDown = true;\n        }\n\n        break;\n\n      default:\n    }\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"keyup\", evt => {\n      this.manageKeyBoardEffect(evt.key, \"up\");\n    });\n    window.addEventListener(\"keydown\", evt => {\n      this.manageKeyBoardEffect(evt.key, \"down\");\n    });\n  }\n\n  componentWillUnmount() {\n    //Clear keyboard events for this component\n    window.removeEventListener(\"keyup\", evt => {\n      this.manageKeyBoardEffect(evt.key, \"up\");\n    });\n    window.removeEventListener(\"keydown\", evt => {\n      this.manageKeyBoardEffect(evt.key, \"down\");\n    });\n  }\n\n  render() {\n    let columnHeaders = this.getColumnHeaders(); // let testTooltip : ReactElement = (\n    //     <div className=\"tool-tip\" style={{height : \"344px\"}}>\n    //         {toolTipContent.clickDragGrid()}\n    //     </div>\n    // );\n\n    let gridStyle = `1rem repeat(${this.getNumColumns()}, minmax(max-content, 1fr)) max-content`;\n    let constructedGrid = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: `data-grid ${this.props.classes}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 777,\n        columnNumber: 17\n      }\n    }, this.gridStyles(), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'grid',\n        gridTemplateColumns: gridStyle\n      },\n      className: \"viewport\",\n      onMouseMove: () => this.mouseMoveActions(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 780,\n        columnNumber: 21\n      }\n    }, columnHeaders, this.getGridItems())), this.getDragArea());\n    return constructedGrid;\n  }\n\n}","map":{"version":3,"sources":["/Users/hr145a/Documents/WayfairCodeBases/CatMan/catmen-client/src/view-components/data-grid/data-grid.tsx"],"names":["React","AppButton","CatmanIcon","Tile","toolTipContent","ToolTipContent","ReactDOM","win","DataGrid","Component","constructor","props","selectionSet","selectedCells","numCols","numRows","startSelectionRow","startSelectionCell","dragInterval","dragCounter","root","document","getElementById","cellRange","_checkedRows","shiftDown","controlDown","iconForCheckBox","row","i","state","checkedRows","length","updateSelectionState","setState","columnHeadTooltip","tooltiptype","tooltip","header","workingDataSet","data","hoveredRow","mouseIsDown","mouseX","mouseY","initialMouseX","initialMouseY","startCell","endCell","startRow","endRow","getNumColumns","getNumRows","manageSelection","cell","columnName","clearSelection","push","selected","columnsData","j","splice","selectionCallback","undefined","selectedItems","lastRow","newItem","cells","productFields","x","y","checkSelected","getProductUniqueID","index","value","mouseDownAction","window","setInterval","console","log","mousePos","mouseUpAction","clearInterval","manageAppCues","hoverRowAction","toString","mouseOutRowAction","manageCheckbox","found","selectedCell","showSelectRow","switchToEditModeFromCheckBoxMode","getGridItems","gridColumn","gridRow","zIndex","selectRow","control","clickCellsActions","manageParentViews","hasDetailsActionButton","singleProduct","getColumnHeaders","columnsHeads","columnActiveCheck","focusedItem","editDrawerOpen","tileType","cellClass","columnHead","columnLabel","tooltipType","toolTip","addAction","insertColumn","selectedIndicator","gridRowStart","gridRowEnd","gridStyles","style","__html","getDragArea","calcStyles","coordinates","top","bottom","windowSize","height","left","right","width","dragArea","clickDragGrid","createPortal","mouseMoveActions","selectionIndicator","gridColumnStart","gridColumnEnd","gridDragTutorial","manageKeyBoardEffect","key","keyAction","componentDidMount","addEventListener","evt","componentWillUnmount","removeEventListener","render","columnHeaders","gridStyle","constructedGrid","classes","display","gridTemplateColumns"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport {ReactElement} from \"react\";\nimport {iDataGridItem} from \"../../_catman-data-types\";\nimport AppButton from \"../button/app-button\";\nimport {CatmanIcon} from \"../../svg/icons/icons\";\nimport {selectedStateType, Tile} from \"../tiles/tile-component\";\nimport {toolTipContent} from \"../../views/tool-tip-content/content-tool-tips\";\nimport camelcase from \"camelcase\";\nimport {iColumn} from \"../../_catman-data-types\";\nimport {DataManager} from \"../../data-components/data-manager/data-manager\";\nimport classesIllustration from \"../../images/SVG/illustration-classes.svg\";\nimport {ToolTipContent} from \"../heru-tool-tip/tool-tip-content\";\nimport ReactDOM from \"react-dom\";\nimport {win} from \"../../index\";\nimport {focusInputType} from \"../../views/catalog-views/catalog-details/catalog-details-view\";\n\n\n//data grid data should be an array of arrays\n//each product is an array of attributes\ninterface iPROPS {\n    data : iDataGridItem[][];\n    manageParentViews : Function;\n    selectionCallback? : Function;\n    columnsData : iColumn[];\n    classes? : string;\n    addAction : Function;\n    focusedItem? : focusInputType;\n    hasDetailsActionButton : boolean\n}\n\ninterface iSTATE {\n    selectionSet : selectionObject[];\n    checkedRows :number[];\n    workingDataSet : iDataGridItem[][];\n    hoveredRow : string;\n    mouseIsDown : boolean;\n    mouseX : number;\n    mouseY : number;\n    initialMouseX : number;\n    initialMouseY : number;\n}\n\nexport type selectionObject = {\n    row : number;\n    cell : number;\n    selected : boolean;\n    columnName : string;\n}\n\nexport class DataGrid extends React.Component<iPROPS, iSTATE>{\n    constructor(props:iPROPS) {\n        super(props);\n        this.state = {\n            workingDataSet : this.props.data,\n            selectionSet : [],\n            checkedRows : [],\n            hoveredRow : \"\",\n            mouseIsDown : false,\n            mouseX : 0,\n            mouseY : 0,\n            initialMouseX : 0,\n            initialMouseY : 0\n        };\n        this.startSelectionRow = 0;\n        this.startSelectionCell = 0;\n\n        this.cellRange = {\n            startCell : 0,\n            endCell : 0,\n            startRow : 0,\n            endRow : 0,\n        };\n\n        this.numCols = this.getNumColumns();\n        this.numRows = this.getNumRows();\n    }\n    selectionSet : selectionObject[] = [];\n    selectedCells : iDataGridItem[] = [];\n    numCols : number;\n    numRows: number;\n    startSelectionRow : number;\n    startSelectionCell : number;\n    dragInterval : number | null = null;\n    dragCounter : number = 0;\n\n    //used root for portals for overlays\n    root = ()=>{\n        let root : any | HTMLElement = document.getElementById(\"root\");\n        if(root != null){\n            return root;\n        }\n    };\n\n    cellRange : any;\n    _checkedRows : number[] = [];\n\n    shiftDown : boolean = false;\n    controlDown : boolean = false;\n\n    manageSelection(row:number, cell:number, columnName : string,  clearSelection : boolean){\n\n        if(clearSelection){\n            this.selectionSet = [];\n            this._checkedRows = [];\n        }\n\n        if(this.startSelectionRow > row){\n            this.cellRange.startRow = row;\n            this.cellRange.endRow = this.startSelectionRow\n        }else{\n            this.cellRange.startRow = this.startSelectionRow;\n            this.cellRange.endRow = row;\n        }\n\n        if(this.startSelectionCell > cell){\n            this.cellRange.startCell = cell;\n            this.cellRange.endCell = this.startSelectionCell;\n        }else {\n            this.cellRange.startCell = this.startSelectionCell;\n            this.cellRange.endCell = cell;\n        }\n\n        if(row === this.startSelectionRow && cell === this.startSelectionCell){\n            this.selectionSet.push(\n                {\n                    row: row,\n                    cell: cell,\n                    selected : true,\n                    columnName : this.props.columnsData[cell-2].columnName\n                    //columnName : appColumns.getColumns[cell-2].columnName\n                }\n            );\n        }\n\n        for( let i = this.cellRange.startRow; i < this.cellRange.endRow+1; i++){\n            for(let j= this.cellRange.startCell; j < this.cellRange.endCell+1; j++){\n                this.selectionSet.push(\n                    {\n                        row: i,\n                        cell: j,\n                        selected : true,\n                        columnName : this.props.columnsData[j-2].columnName\n                    }\n                );\n            }\n        }\n\n        // handle single cell as start and end\n\n        if(this.selectionSet.length === 2){\n            if( this.selectionSet[0].row === this.selectionSet[1].row && this.selectionSet[0].cell === this.selectionSet[1].cell  ){\n                this.selectionSet.splice(1,1);\n            }\n        }\n\n        this.setState({\n            selectionSet : this.selectionSet,\n            checkedRows : this._checkedRows\n        });\n\n\n        if(this.props.selectionCallback !== undefined && this.props.selectionCallback !== null){\n           type iSelectedItem = { row : number, cells : number[], productFields : iDataGridItem[] };\n            let selectedItems : iSelectedItem[] = [  ];\n            let lastRow : number = 0;\n\n            // work through the selection set to organize things\n\n           i: for(let i=0; i < this.selectionSet.length; i++){\n                if(i===0){\n                    //if it's the first one let's create a new entry\n                    lastRow = this.selectionSet[0].row;\n                    let newItem : iSelectedItem = { row : lastRow, cells:[], productFields : []};\n                    selectedItems.push(newItem);\n                }\n\n                //loop over the existing list of rows to create new ones\n                    if(this.selectionSet[i].row === lastRow){\n                        //one more loop over the list to grab all the cells that belong to the row\n                        if(selectedItems[selectedItems.length-1].cells.length === 0){\n                            for(let j=0; j < this.selectionSet.length; j++){\n                                if(this.selectionSet[j].row === lastRow){\n                                    //if the row matches the last row, then push in the selected cell\n                                    selectedItems[selectedItems.length-1].cells.push( this.selectionSet[j].cell );\n                                }\n                            }\n                        }\n                    }else{\n                        lastRow = this.selectionSet[i].row;\n                        let newItem : iSelectedItem = { row : lastRow, cells:[], productFields : []};\n                        selectedItems.push(newItem);\n                    }\n            }\n\n           for(let x=0; x < selectedItems.length; x++){\n                for(let y=0; y < this.state.workingDataSet[selectedItems[x].row-2].length; y++){\n                    selectedItems[x].productFields.push(this.state.workingDataSet[selectedItems[x].row-2][y] )\n                }\n\n           }\n\n\n            this.props.selectionCallback(selectedItems, this._checkedRows, \"standard-launch\", row, cell);\n         }\n    }\n\n    clearSelection(){\n        this.setState({selectionSet:[], checkedRows:[]});\n        this._checkedRows = [];\n        this.selectionSet = [];\n    }\n\n    checkSelected(row:number, cell:number):selectedStateType{\n        for(let i=0; i<this.state.selectionSet.length; i++){\n            if( this.state.selectionSet[i].row === row && this.state.selectionSet[i].cell === cell){\n                return \"selected\";\n            }\n        }\n        //if nothing is found, return false because it isn't selected\n        return \"\";\n    }\n\n    getNumColumns(){\n        //TODO swap this out to calculating total normalized columns\n\n        return this.props.columnsData.length;\n    }\n\n    getNumRows(){\n       if(this.state.workingDataSet.length > 0){\n           return this.state.workingDataSet.length;\n       }else{\n           return this.props.data.length;\n       }\n    }\n\n    getProductUniqueID(index : number){\n\n        for(let j=0; j < this.state.workingDataSet[index].length; j++){\n            if(this.state.workingDataSet[index][j].columnName === \"uniqueID\"){\n                return this.state.workingDataSet[index][j].value;\n            }\n        }\n    }\n\n    mouseDownAction(row : number, cell:number){\n        //set timer for dragging\n        this.dragInterval = window.setInterval(()=>{\n             this.dragCounter++;\n            console.log(\"set interval\", this.dragInterval);\n        }, 200);\n\n        this.startSelectionCell = cell;\n        this.startSelectionRow = row;\n        this.setState({\n            mouseIsDown : true,\n            initialMouseX : win.mousePos.x,\n            initialMouseY : win.mousePos.y\n        });\n    }\n\n    mouseUpAction(row:number, cell:number, columnName : string){\n        this.setState({mouseIsDown : false});\n        this.manageSelection(row, cell, columnName, true);\n        //clear dragging timer\n        if(this.dragInterval != null)\n        {\n            window.clearInterval(this.dragInterval);\n            this.dragCounter = 0;\n        }\n        this.manageAppCues();\n    }\n\n    hoverRowAction(row:number){\n        this.setState({hoveredRow : row.toString()});\n    }\n\n    mouseOutRowAction(){\n        this.setState({hoveredRow : \"\"});\n    }\n\n    manageCheckbox(row : number){\n\n        //find if this number is in the list\n        let found : boolean = false;\n\n\n\n        for(let i=0; i < this._checkedRows.length; i++){\n            if(this._checkedRows[i] === row){\n                //if it is in the list remove it which unchecks\n                this._checkedRows.splice(i, 1);\n                this.setState({checkedRows : this._checkedRows});\n                found = true;\n            }\n        }\n        if(found === false){\n            this._checkedRows.push(row);\n            this.setState({checkedRows : this._checkedRows});\n\n        }\n\n        //handle selecting the checked\n        //First reset the cell selection\n        this.selectionSet = [];\n\n        for(let i=0; i < this._checkedRows.length; i++){\n            for(let j=0; j < this.state.workingDataSet[this._checkedRows[i]].length; j++ ){\n                let selectedCell : selectionObject = {\n                    row : this._checkedRows[i]+2,\n                    cell : j+2,\n                    selected : true,\n                    columnName : this.props.columnsData[j].columnName\n                };\n                this.selectionSet.push(selectedCell);\n            }\n        }\n\n\n        this.setState({selectionSet : this.selectionSet});\n        if(this.props.selectionCallback !== undefined){\n            this.props.selectionCallback(this.state.selectionSet, this.state.checkedRows, \"checkbox-launched\");\n        }\n        //once people use the tool, we can hide the tool tip\n        toolTipContent.showSelectRow = false;\n    }\n\n    switchToEditModeFromCheckBoxMode(){\n        //handle switching from checkbox mode to cell selection mode\n        //First reset the cell selection\n\n        console.log(\"switch to edit mode\");\n\n\n        this._checkedRows = [];\n        this.setState({\n            checkedRows : this._checkedRows\n        });\n        console.log(\"switch to edit mode\", this.selectionSet);\n        console.log(\"switch to edit mode\", this.state.selectionSet);\n        if(this.props.selectionCallback !== undefined){\n            this.props.selectionCallback(this.state.selectionSet, this.state.checkedRows, \"checkbox-launched\");\n        }\n    }\n\n    iconForCheckBox = (row : number):string=>{\n        for(let i=0; i < this.state.checkedRows.length; i++){\n            if(row === this.state.checkedRows[i]){\n                return \"checkbox-checked\"\n            }\n        }\n        return \"checkbox-unchecked\"\n    };\n\n    updateSelectionState = ()=>{\n        this.setState({selectionSet : this.selectionSet});\n    };\n\n    getGridItems(){\n        let cells : ReactElement[] = [];\n        for(let i=0; i < this.state.workingDataSet.length; i++){\n            for(let j=0; j < this.state.workingDataSet[i].length; j++){\n                if(j === 0){\n                    cells.push(\n                        <div id={`row-${i+2}-start`} className={`cell checkbox-main `} style={{gridColumn : j+1, gridRow : i+2, zIndex : 100 + (this.numRows - i) }}>\n                            <AppButton\n                                OnClick={()=>this.manageCheckbox(i)}\n                                hoverActions={[()=>this.hoverRowAction(i+2)]}\n                                buttonType=\"transparent-bg\"\n                                tooltipType=\"custom\"\n                                tooltip={toolTipContent.selectRow()}\n                                classes={`${this.iconForCheckBox(i)}`}\n                                iconCenter={(\n                                    <CatmanIcon\n                                        iconName={`${this.iconForCheckBox(i)}`}\n                                        width=\"100%\"\n                                        height=\"100%\"\n                                    />\n                                )}\n                            />\n                            <CatmanIcon\n                                classes={\"shading-l-r\"}\n                                iconName=\"fader-left-to-right\"\n                                width=\"0.5rem\"\n                                height=\"100%\"\n                            />\n                        </div>\n                    )\n                }\n\n                let cell = (\n                    <div draggable={false} className={`cell row-${i+2}`} style={{gridColumn : j+2, gridRow : i+2 }}>\n                        <Tile\n                            tileType={this.props.columnsData[j].control}\n                            tileLabel={this.state.workingDataSet[i][j].value}\n                            action={() => this.clickCellsActions()}\n                            hoverActions={[()=>this.hoverRowAction(i+2)]}\n                            mouseOutActions={[()=>this.mouseOutRowAction()]}\n                            mouseDownActions={\n                                [() => this.mouseDownAction(i+2,j+2)]\n                            }\n                            mouseUpActions={\n                                [\n                                    () => this.props.manageParentViews(),\n                                    () => this.mouseUpAction(i+2,j+2, this.props.columnsData[j].columnName)\n                                ]\n                            }\n                            selectedClass={this.checkSelected(i+2, j+2)}\n\n                        />\n\n                    </div>\n                );\n\n                if( this.props.columnsData[j].control !== \"hidden\"){\n                    cells.push(cell);\n                }\n\n                if(j === this.state.workingDataSet[i].length-1 && this.props.hasDetailsActionButton === true){\n                    cells.push(\n                        <div className=\"cell details\" style={{gridColumn : j+3, gridRow : i+2, zIndex : 100 + (this.numRows - i) }}>\n                            <AppButton\n                                buttonType=\"nav-link\"\n                                navPath={`/catalog/spreadsheet?product=${this.getProductUniqueID(i)}`}\n                                tooltipType=\"custom\"\n                                tooltip={toolTipContent.singleProduct()}\n                                iconCenter={(\n                                    <CatmanIcon\n                                        iconName=\"go-arrow\"\n                                        width=\"1rem\"\n                                        height=\"100%\"\n                                    />\n                                )}\n                            />\n                            <CatmanIcon\n                                classes={\"shading\"}\n                                iconName=\"fader-right-to-left\"\n                                width=\"0.5rem\"\n                                height=\"100%\"\n                            />\n\n                        </div>\n                    )\n                }\n            }\n        }\n\n        return cells;\n    }\n\n    columnHeadTooltip = (tooltiptype : \"custom\" | \"basic\", tooltip:ReactElement | string, header:string)=>{\n\n        switch (tooltiptype) {\n            case \"basic\":\n                return(<ToolTipContent\n                    header={header}\n                    copy={ tooltip }\n                    tooltipType=\"deluxe\"\n                    icon={\n                        <CatmanIcon\n                            iconName=\"info-icon-help\"\n                            classes=\"\"\n                            height=\"1.5rem\"\n                            width=\"1.5rem\"\n                        />\n                    }\n                />);\n            case \"custom\":\n                return tooltip;\n        }\n\n        return (<></>)\n    };\n\n    getColumnHeaders(){\n        let columnsHeads : ReactElement[] = [];\n\n        //Header checkbox for \"select all\"\n        for(let i=0; i < this.props.columnsData.length; i++ ){\n            if(i === 0){\n                columnsHeads.push(\n                    <div className=\"cell checkbox-main grid-header\" style={{gridColumn : i+1, gridRow : 1, zIndex : 120 + (this.numCols) }}>\n                        <AppButton\n                            OnClick={()=>this.manageCheckbox(i)}\n                            buttonType=\"transparent-bg\"\n                            tooltipType=\"custom\"\n                            tooltip={toolTipContent.selectRow()}\n                            classes={` `}\n                            iconCenter={(\n                                <CatmanIcon\n                                    iconName={`${this.iconForCheckBox(i)}`}\n                                    width=\"0.5rem\"\n                                    height=\"100%\"\n                                />\n                            )}\n                        />\n                    </div>\n                )\n            }\n\n            //Handling the something-in-column selected visual indicator\n            const columnActiveCheck = ()=>{\n                if(this.props.focusedItem?.cell === (i+2) && this.props.focusedItem.editDrawerOpen === true){\n                    return {tileType:\"header-active\", cellClass:\"active\"};\n                }else{\n                    return {tileType:\"column-header\", cellClass:\"\"};\n                }\n            };\n\n\n            let columnHead = (\n                <div className={`cell grid-header ${columnActiveCheck().cellClass}`} style={{gridColumn : i+2, gridRow : 1, zIndex: this.numRows+100+i  }}>\n                    <Tile\n                        tileType={columnActiveCheck().tileType}\n                        tileLabel={this.props.columnsData[i].columnLabel}\n                        toolTip={ this.columnHeadTooltip(\n                            this.props.columnsData[i].tooltipType,\n                            this.props.columnsData[i].toolTip,\n                            this.props.columnsData[i].columnLabel\n                        )}\n                        toolTipTimeOut={30000}\n                        mouseDownActions={\n                            [ ]\n                        }\n                        mouseUpActions={\n                            [\n                                () => this.props.manageParentViews()\n                            ]\n                        }\n                        selectedClass={\"\"}\n                    />\n                </div>\n            );\n\n            if(this.props.columnsData[i].control != \"hidden\"){\n                columnsHeads.push(columnHead);\n            }\n\n            //final column head action\n            if(i === this.props.columnsData.length-1){\n                columnsHeads.push(\n                    <div className=\"cell details grid-header\"\n                         style={{gridColumn : this.props.columnsData.length+2, gridRow : 1, zIndex : (200 + this.numCols+2) }}\n                        >\n                        <AppButton\n                            buttonType=\"button-custom\"\n                            classes=\"add-column\"\n                            navPath={`/catalog/spreadsheet`}\n                            OnClick={()=>this.props.addAction(\"add-attribute\")}\n                            tooltipType=\"custom\"\n                            tooltip={toolTipContent.insertColumn()}\n                            iconCenter={(\n                                <CatmanIcon\n                                    iconName=\"icon-plus\"\n                                    width=\"0.5rem\"\n                                    height=\"100%\"\n                                />\n                            )}\n                        />\n                        <CatmanIcon\n                            classes={\"shading-l-r\"}\n                            iconName=\"fader-right-to-left\"\n                            width=\"0.5rem\"\n                            height=\"100%\"\n                        />\n                    </div>\n                )\n            }\n\n\n            //create the selected overlay\n            if(this.props.focusedItem?.cell === (i+2) && this.props.focusedItem.editDrawerOpen === true){\n                           let selectedIndicator = (\n                               <div className=\"cell selected-indicator\" style={{gridColumn : i+2, gridRowStart : this.cellRange.startRow, gridRowEnd:this.cellRange.endRow+1 }}>\n                                <div className=\"handle\"></div>\n                               </div>\n                           );\n                columnsHeads.push(selectedIndicator)\n            }else if(this.state.selectionSet.length == 0)\n            {\n                let selectedIndicator = (\n                    <div className=\"cell selected-indicator\" style={{gridColumn : 4, gridRowStart : 2, gridRowEnd: 2 }}>\n                        <div className=\"handle\"></div>\n                    </div>\n                );\n                columnsHeads.push(selectedIndicator)\n            }\n\n\n        }\n\n        return( columnsHeads );\n    }\n\n    //HOVER ROW STYLE\n    gridStyles(){\n        //This let's us have a hover row effect with css grid\n        //This way we don't have to put containers around each row just for visual cue\n            let style = `\n            .row-${this.state.hoveredRow} {\n                background-color: #f4f4f5;                \n            }\n            \n            .row-${this.state.hoveredRow} .cell-editable{\n                z-index:100;\n            }\n            \n            .row-${this.state.hoveredRow} p{\n                    color: #473F4A  ;\n            }\n            `;\n\n\n\n        return <style dangerouslySetInnerHTML={{ __html: `${style}` }} />\n    }\n\n    clickCellsActions(){\n        this.setState({mouseIsDown : false})\n    }\n\n    //DRAG AREA - create bounding box while dragging\n    getDragArea(){\n        //Only run if mouse is down\n        if(this.dragInterval != undefined){\n            if(this.state.mouseIsDown === true  ){\n\n                let calcStyles =()=> {\n                    //calculate where the drag area will draw\n                    let coordinates = {\n                        top : this.state.initialMouseY,\n                        bottom : win.windowSize().height - this.state.mouseY,\n                        left : this.state.initialMouseX,\n                        right: win.windowSize().width - this.state.mouseX\n                    };\n\n                    if(this.state.initialMouseY <=  this.state.mouseY ){\n                        coordinates.top = this.state.initialMouseY;\n                        coordinates.bottom = win.windowSize().height - this.state.mouseY;\n                    }else if(this.state.initialMouseY >= this.state.mouseY){\n                        coordinates.top = win.mousePos.y;\n                        coordinates.bottom = win.windowSize().height - this.state.initialMouseY;\n                    }\n\n                    if( this.state.mouseX >=  this.state.initialMouseX ){\n                        coordinates.left = this.state.initialMouseX;\n                        coordinates.right = win.windowSize().width - this.state.mouseX;\n                    }else if( this.state.mouseY >= this.state.initialMouseY){\n                        coordinates.left = win.mousePos.x;\n                        coordinates.right = win.windowSize().width - this.state.initialMouseX;\n                    }\n\n                    if( this.state.mouseX <=  this.state.initialMouseX && this.state.initialMouseY >=  this.state.mouseY ){\n                        coordinates.left = this.state.mouseX;\n                        coordinates.right = win.windowSize().width - this.state.initialMouseX;\n                    }\n                    return coordinates;\n                };\n                let dragArea = (\n                    <div\n                        className=\"drag-area\"\n                        style={ calcStyles() }\n                    >\n                        <div className=\"drag-inner-container\">\n                            <div className=\"tool-tip\">\n                                {toolTipContent.clickDragGrid()}\n                            </div>\n                        </div>\n                    </div>\n                );\n                return ReactDOM.createPortal(dragArea, this.root());\n            }else{\n                if(this.dragInterval != null){\n                    clearInterval(this.dragInterval);\n                }\n            }\n        }\n    }\n\n    //Mouse move, this is used for defining the drag area rectangle but could be used for other stuff\n    mouseMoveActions(){\n        if(this.dragCounter % 2 == 0 ){\n            this.setState({mouseX : win.mousePos.x, mouseY : win.mousePos.y})\n        }\n    }\n\n    selectionIndicator()\n    {\n        console.log(\"selection set\", this.state.selectionSet.length);\n\n            let selectedIndicator = (\n                <div className=\"cell selected-indicator\" style={{gridRowStart : 2, gridColumnStart : 2, gridRowEnd: 2, gridColumnEnd : \"auto\" }}>\n                    <div className=\"handle\"></div>\n                </div>\n            );\n\n            return selectedIndicator;\n\n    }\n\n    //APP CUES aka Super tooltips\n    manageAppCues(){\n        if(this.selectionSet.length > 1){\n            toolTipContent.gridDragTutorial++;\n        }\n    }\n\n    manageKeyBoardEffect(key : string, keyAction:\"up\" | \"down\"){\n        console.log(key);\n        switch (key) {\n            case \"Enter\":\n\n                break;\n            case \"ArrowDown\":\n\n                break;\n            case \"ArrowUp\":\n\n                break;\n            case \"ArrowLeft\":\n\n                break;\n            case \"ArrowRight\":\n\n                break;\n            case \"Enter\":\n                this.setState({selectionSet : []});\n                break;\n            case \"Meta\":\n                    if(keyAction == \"up\"){\n                        this.controlDown = false;\n                    }else if(keyAction == \"down\"){\n                        this.controlDown = true;\n                    }\n                break;\n            default:\n\n        }\n    }\n\n    componentDidMount(): void {\n\n        window.addEventListener(\"keyup\", (evt: KeyboardEvent)=>{\n            this.manageKeyBoardEffect(evt.key, \"up\");\n        });\n\n        window.addEventListener(\"keydown\", (evt: KeyboardEvent)=>{\n            this.manageKeyBoardEffect(evt.key, \"down\");\n        });\n    }\n\n    componentWillUnmount(): void {\n        //Clear keyboard events for this component\n        window.removeEventListener(\"keyup\", (evt: KeyboardEvent)=>{\n            this.manageKeyBoardEffect(evt.key, \"up\");\n        });\n\n        window.removeEventListener(\"keydown\", (evt: KeyboardEvent)=>{\n            this.manageKeyBoardEffect(evt.key, \"down\");\n        });\n    }\n\n    render(): React.ReactElement<any, string | React.JSXElementConstructor<any>> | string | number | {} | React.ReactNodeArray | React.ReactPortal | boolean | null | undefined {\n\n        let columnHeaders : ReactElement[] = this.getColumnHeaders();\n\n        // let testTooltip : ReactElement = (\n        //     <div className=\"tool-tip\" style={{height : \"344px\"}}>\n        //         {toolTipContent.clickDragGrid()}\n        //     </div>\n        // );\n\n        let gridStyle = `1rem repeat(${this.getNumColumns()}, minmax(max-content, 1fr)) max-content`;\n\n        let constructedGrid : ReactElement = (\n            <>\n                <div className={`data-grid ${this.props.classes}`}>\n                    {this.gridStyles()}\n\n                    <div style={{ display:'grid', gridTemplateColumns:gridStyle}} className=\"viewport\" onMouseMove={()=>this.mouseMoveActions()}>\n                        {columnHeaders}\n                        {this.getGridItems()}\n                    </div>\n                </div>\n                {this.getDragArea()}\n\n            </>\n        );\n\n        return constructedGrid;\n    }\n}"]},"metadata":{},"sourceType":"module"}