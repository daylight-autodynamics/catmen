{"ast":null,"code":"var _jsxFileName = \"/Users/hr145a/Documents/WayfairCodeBases/CatMan/catmen-client/src/view-components/data-grid/data-grid.tsx\";\nimport * as React from \"react\";\nimport AppButton from \"../button/app-button\";\nimport { CatmanIcon } from \"../../svg/icons/icons\";\nimport { Tile } from \"../tiles/tile-component\";\nimport { toolTipContent } from \"../../views/_common/tool-tip-content/content-tool-tips\";\nimport { appColumns } from \"../../_sample-data/columns\"; //data grid data should be an array of arrays\n//each product is an array of attributes\n\nexport class DataGrid extends React.Component {\n  constructor(props) {\n    super(props);\n    this.selectionSet = [];\n    this.numCols = void 0;\n    this.numRows = void 0;\n    this.startSelectionRow = void 0;\n    this.startSelectionCell = void 0;\n    this.cellRange = void 0;\n    this._checkedRows = [];\n\n    this.iconCheck = row => {\n      for (let i = 0; i < this.state.checkedRows.length; i++) {\n        if (row === this.state.checkedRows[i]) {\n          return \"checkbox-checked\";\n        }\n      }\n\n      return \"checkbox-unchecked\";\n    };\n\n    this.updateSelectionState = () => {\n      this.setState({\n        selectionSet: this.selectionSet\n      });\n    };\n\n    this.numCols = this.getNumColumns();\n    this.numRows = this.getNumRows();\n    this.state = {\n      selectionSet: [],\n      checkedRows: []\n    };\n    this.startSelectionRow = 0;\n    this.startSelectionCell = 0;\n    this.cellRange = {\n      startCell: 0,\n      endCell: 0,\n      startRow: 0,\n      endRow: 0\n    };\n  }\n\n  manageSelection(row, cell, columnName, clearSelection) {\n    if (clearSelection) {\n      this.selectionSet = [];\n      this._checkedRows = [];\n    }\n\n    if (this.startSelectionRow > row) {\n      this.cellRange.startRow = row;\n      this.cellRange.endRow = this.startSelectionRow;\n    } else {\n      this.cellRange.startRow = this.startSelectionRow;\n      this.cellRange.endRow = row;\n    }\n\n    if (this.startSelectionCell > cell) {\n      this.cellRange.startCell = cell;\n      this.cellRange.endCell = this.startSelectionCell;\n    } else {\n      this.cellRange.startCell = this.startSelectionCell;\n      this.cellRange.endCell = cell;\n    }\n\n    if (row === this.startSelectionRow && cell === this.startSelectionCell) {\n      this.selectionSet.push({\n        row: row,\n        cell: cell,\n        selected: true,\n        columnName: columnName\n      });\n    }\n\n    for (let i = this.cellRange.startRow; i < this.cellRange.endRow + 1; i++) {\n      for (let j = this.cellRange.startCell; j < this.cellRange.endCell + 1; j++) {\n        this.selectionSet.push({\n          row: i,\n          cell: j,\n          selected: true,\n          columnName: columnName\n        });\n      }\n    } // handle single cell as start and end\n\n\n    if (this.selectionSet.length === 2) {\n      if (this.selectionSet[0].row === this.selectionSet[1].row && this.selectionSet[0].cell === this.selectionSet[1].cell) {\n        this.selectionSet.splice(1, 1);\n      }\n    }\n\n    this.setState({\n      selectionSet: this.selectionSet,\n      checkedRows: this._checkedRows\n    });\n    console.log(\"this.selectionSet: \", this.selectionSet);\n    console.log(\"this.state.selectionSet: \", this.state.selectionSet);\n\n    if (this.props.selectionCallback !== undefined && this.props.selectionCallback !== null) {\n      let selectedItems = [];\n      let lastRow = 0; // work through the selection set to organize things\n\n      i: for (let i = 0; i < this.selectionSet.length; i++) {\n        if (i === 0) {\n          //if it's the first one let's create a new entry\n          lastRow = this.selectionSet[0].row;\n          let newItem = {\n            row: lastRow,\n            cells: [],\n            productFields: []\n          };\n          selectedItems.push(newItem);\n        } //loop over the existing list of rows to create new ones\n\n\n        if (this.selectionSet[i].row === lastRow) {\n          //one more loop over the list to grab all the cells that belong to the row\n          if (selectedItems[selectedItems.length - 1].cells.length === 0) {\n            for (let j = 0; j < this.selectionSet.length; j++) {\n              if (this.selectionSet[j].row === lastRow) {\n                //if the row matches the last row, then push in the selected cell\n                selectedItems[selectedItems.length - 1].cells.push(this.selectionSet[j].cell);\n              }\n            }\n          }\n        } else {\n          lastRow = this.selectionSet[i].row;\n          let newItem = {\n            row: lastRow,\n            cells: [],\n            productFields: []\n          };\n          selectedItems.push(newItem);\n        }\n      }\n\n      for (let x = 0; x < selectedItems.length; x++) {\n        for (let y = 0; y < this.props.data[selectedItems[x].row - 2].length; y++) {\n          selectedItems[x].productFields.push(this.props.data[selectedItems[x].row - 2][y]);\n        }\n      }\n\n      console.log(\"selection set: \", this.state.selectionSet);\n      console.log(\"inner callback\", selectedItems[0]);\n      this.props.selectionCallback(selectedItems, this._checkedRows, \"standard-launch\");\n    }\n  }\n\n  clearSelection() {\n    this.setState({\n      selectionSet: [],\n      checkedRows: []\n    });\n    this._checkedRows = [];\n    this.selectionSet = [];\n  }\n\n  checkSelected(row, cell) {\n    for (let i = 0; i < this.state.selectionSet.length; i++) {\n      if (this.state.selectionSet[i].row === row && this.state.selectionSet[i].cell === cell) {\n        return \"selected\";\n      }\n    } //if nothing is found, return false because it isn't selected\n\n\n    return \"\";\n  }\n\n  getNumColumns() {\n    //TODO swap this out to calculating total normalized columns\n    return appColumns.getColumns().length;\n  }\n\n  getNumRows() {\n    return this.props.data.length;\n  }\n\n  getProductUniqueID(index) {\n    for (let j = 0; j < this.props.data[index].length; j++) {\n      if (this.props.data[index][j].column === \"uniqueID\") {\n        return this.props.data[index][j].value;\n      }\n    }\n  }\n\n  mouseDownAction(row, cell) {\n    this.startSelectionCell = cell;\n    this.startSelectionRow = row;\n  }\n\n  mouseUpAction(row, cell, columnName) {\n    console.log(\"@@@check\", row, \" \", cell, \" \", columnName);\n    this.manageSelection(row, cell, columnName, true);\n  }\n\n  manageCheckbox(row) {\n    //find if this number is in the list\n    let found = false;\n\n    for (let i = 0; i < this._checkedRows.length; i++) {\n      if (this._checkedRows[i] === row) {\n        //if it is in the list remove it which unchecks\n        this._checkedRows.splice(i, 1);\n\n        this.setState({\n          checkedRows: this._checkedRows\n        });\n        found = true;\n      }\n    }\n\n    if (found === false) {\n      this._checkedRows.push(row);\n\n      this.setState({\n        checkedRows: this._checkedRows\n      });\n    } //handle selecting the checked\n    //First reset the cell selection\n\n\n    this.selectionSet = [];\n\n    for (let i = 0; i < this._checkedRows.length; i++) {\n      for (let j = 0; j < this.props.data[this._checkedRows[i] - 1].length; j++) {\n        let selectedCell = {\n          row: this._checkedRows[i] + 1,\n          cell: j,\n          selected: true,\n          columnName: appColumns.getColumns()[i + 1].columnName\n        };\n        this.selectionSet.push(selectedCell);\n      }\n    }\n\n    this.setState({\n      selectionSet: this.selectionSet\n    });\n\n    if (this.props.selectionCallback !== undefined) {\n      this.props.selectionCallback(this.state.selectionSet, this.state.checkedRows, \"checkbox-launched\");\n    } //once people use the tool, we can hide the tool tip\n\n\n    toolTipContent.showSelectRow = false;\n  }\n\n  getGridItems() {\n    let cells = [];\n\n    for (let i = 0; i < this.props.data.length; i++) {\n      for (let j = 0; j < this.props.data[i].length; j++) {\n        if (j === 0) {\n          cells.push( /*#__PURE__*/React.createElement(\"div\", {\n            className: \"cell checkbox-main\",\n            style: {\n              gridColumn: j + 1,\n              gridRow: i + 2,\n              zIndex: 100 + (this.numRows - i)\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 25\n            }\n          }, /*#__PURE__*/React.createElement(AppButton, {\n            OnClick: () => this.manageCheckbox(i + 1),\n            buttonType: \"transparent-bg\",\n            tooltipType: \"custom\",\n            tooltip: toolTipContent.selectRow(),\n            classes: `${this.iconCheck(i + 1)}`,\n            iconCenter: /*#__PURE__*/React.createElement(CatmanIcon, {\n              iconName: `${this.iconCheck(i + 1)}`,\n              width: \"0.5rem\",\n              height: \"100%\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 37\n              }\n            }),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 29\n            }\n          })));\n        }\n\n        let cell = /*#__PURE__*/React.createElement(\"div\", {\n          className: \"cell\",\n          style: {\n            gridColumn: j + 2,\n            gridRow: i + 2\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(Tile, {\n          tileType: this.props.columns[j].control,\n          tileLabel: this.props.data[i][j].value,\n          mouseDownActions: [() => this.mouseDownAction(i + 2, j + 2)],\n          mouseUpActions: [() => this.props.manageParentViews(), () => this.mouseUpAction(i + 2, j + 2, appColumns.getColumns()[j].columnName)],\n          selectedClass: this.checkSelected(i + 2, j + 2),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 25\n          }\n        }));\n\n        if (this.props.columns[j].control != \"hidden\") {\n          cells.push(cell);\n        }\n\n        if (j === this.props.data[i].length - 1) {\n          cells.push( /*#__PURE__*/React.createElement(\"div\", {\n            className: \"cell details\",\n            style: {\n              gridColumn: j + 3,\n              gridRow: i + 2,\n              zIndex: 100 + (this.numRows - i)\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 25\n            }\n          }, /*#__PURE__*/React.createElement(AppButton, {\n            buttonType: \"nav-link\",\n            navPath: `/catalog/spreadsheet?product=${this.getProductUniqueID(i)}`,\n            tooltipType: \"custom\",\n            tooltip: toolTipContent.singleProduct(),\n            iconCenter: /*#__PURE__*/React.createElement(CatmanIcon, {\n              iconName: \"go-arrow\",\n              width: \"1rem\",\n              height: \"100%\",\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 37\n              }\n            }),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 29\n            }\n          })));\n        }\n      }\n    }\n\n    return cells;\n  }\n\n  getColumnHeaders() {\n    let columnsHeads = [];\n\n    for (let i = 0; i < this.props.columns.length; i++) {\n      if (i === 0) {\n        columnsHeads.push( /*#__PURE__*/React.createElement(\"div\", {\n          className: \"cell checkbox-main grid-header\",\n          style: {\n            gridColumn: i + 1,\n            gridRow: 1,\n            zIndex: 100 + (this.numRows - i)\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(AppButton, {\n          OnClick: () => this.manageCheckbox(i),\n          buttonType: \"transparent-bg\",\n          tooltipType: \"custom\",\n          tooltip: toolTipContent.selectRow(),\n          classes: ` `,\n          iconCenter: /*#__PURE__*/React.createElement(CatmanIcon, {\n            iconName: `${this.iconCheck(i)}`,\n            width: \"0.5rem\",\n            height: \"100%\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 33\n            }\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 25\n          }\n        })));\n      }\n\n      let columnHead = /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cell grid-header\",\n        style: {\n          gridColumn: i + 2,\n          gridRow: 1,\n          zIndex: this.numRows + 10\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Tile, {\n        tileType: \"text-input\",\n        tileLabel: this.props.columns[i].columnLabel,\n        mouseDownActions: [],\n        mouseUpActions: [() => this.props.manageParentViews()],\n        selectedClass: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 21\n        }\n      }));\n\n      if (this.props.columns[i].control != \"hidden\") {\n        columnsHeads.push(columnHead);\n      } //final column head action\n\n\n      if (i === this.props.columns.length - 1) {\n        columnsHeads.push( /*#__PURE__*/React.createElement(\"div\", {\n          className: \"cell details grid-header\",\n          style: {\n            gridColumn: this.props.columns.length + 2,\n            gridRow: 1,\n            zIndex: 100 + (this.numRows - i)\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(AppButton, {\n          buttonType: \"nav-link\",\n          navPath: `/catalog/spreadsheet`,\n          tooltipType: \"custom\",\n          tooltip: toolTipContent.singleProduct(),\n          iconCenter: /*#__PURE__*/React.createElement(CatmanIcon, {\n            iconName: \"go-arrow\",\n            width: \"1rem\",\n            height: \"100%\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 33\n            }\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 25\n          }\n        })));\n      }\n    }\n\n    return columnsHeads;\n  }\n\n  render() {\n    let columnHeaders = this.getColumnHeaders(); //having some trouble with layout of grid and checkboxes\n    // style={{gridTemplateColumns : `1.5rem repeat(${this.getNumColumns().toString()}, max-content) 1rem`}}\n\n    let constructedGrid = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: `data-grid ${this.props.classes}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"viewport\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 21\n      }\n    }, columnHeaders, this.getGridItems())));\n    return constructedGrid;\n  }\n\n}","map":{"version":3,"sources":["/Users/hr145a/Documents/WayfairCodeBases/CatMan/catmen-client/src/view-components/data-grid/data-grid.tsx"],"names":["React","AppButton","CatmanIcon","Tile","toolTipContent","appColumns","DataGrid","Component","constructor","props","selectionSet","numCols","numRows","startSelectionRow","startSelectionCell","cellRange","_checkedRows","iconCheck","row","i","state","checkedRows","length","updateSelectionState","setState","getNumColumns","getNumRows","startCell","endCell","startRow","endRow","manageSelection","cell","columnName","clearSelection","push","selected","j","splice","console","log","selectionCallback","undefined","selectedItems","lastRow","newItem","cells","productFields","x","y","data","checkSelected","getColumns","getProductUniqueID","index","column","value","mouseDownAction","mouseUpAction","manageCheckbox","found","selectedCell","showSelectRow","getGridItems","gridColumn","gridRow","zIndex","selectRow","columns","control","manageParentViews","singleProduct","getColumnHeaders","columnsHeads","columnHead","columnLabel","render","columnHeaders","constructedGrid","classes"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport {ReactElement} from \"react\";\nimport {iDataGridItem} from \"./data-types-for-data-grid\";\nimport AppButton from \"../button/app-button\";\nimport {CatmanIcon} from \"../../svg/icons/icons\";\nimport {selectedStateType, Tile} from \"../tiles/tile-component\";\nimport {toolTipContent} from \"../../views/_common/tool-tip-content/content-tool-tips\";\nimport camelcase from \"camelcase\";\nimport {appColumns, iColumn} from \"../../_sample-data/columns\";\n\n//data grid data should be an array of arrays\n//each product is an array of attributes\ninterface iPROPS {\n    data : iDataGridItem[][];\n    manageParentViews : Function;\n    selectionCallback? : Function;\n    columns : iColumn[];\n    classes? : string;\n}\n\ninterface iSTATE {\n    selectionSet : selectionObject[];\n    checkedRows :number[];\n}\n\nexport type selectionObject = {\n    row : number;\n    cell : number;\n    selected : boolean;\n    columnName : string;\n}\n\nexport class DataGrid extends React.Component<iPROPS, iSTATE>{\n    constructor(props:iPROPS) {\n        super(props);\n        this.numCols = this.getNumColumns();\n        this.numRows = this.getNumRows();\n        this.state = {\n            selectionSet : [],\n            checkedRows : []\n        };\n        this.startSelectionRow = 0;\n        this.startSelectionCell = 0;\n\n        this.cellRange = {\n            startCell : 0,\n            endCell : 0,\n            startRow : 0,\n            endRow : 0,\n        }\n    }\n    selectionSet : selectionObject[] = [];\n    numCols : number;\n    numRows: number;\n    startSelectionRow : number;\n    startSelectionCell : number;\n\n    cellRange : any;\n    _checkedRows : number[] = [];\n\n    manageSelection(row:number, cell:number, columnName : string,  clearSelection : boolean){\n\n        if(clearSelection){\n            this.selectionSet = [];\n            this._checkedRows = [];\n        }\n\n        if(this.startSelectionRow > row){\n            this.cellRange.startRow = row;\n            this.cellRange.endRow = this.startSelectionRow\n        }else{\n            this.cellRange.startRow = this.startSelectionRow;\n            this.cellRange.endRow = row;\n        }\n\n        if(this.startSelectionCell > cell){\n            this.cellRange.startCell = cell;\n            this.cellRange.endCell = this.startSelectionCell;\n        }else {\n            this.cellRange.startCell = this.startSelectionCell;\n            this.cellRange.endCell = cell;\n        }\n\n        if(row === this.startSelectionRow && cell === this.startSelectionCell){\n            this.selectionSet.push(\n                {\n                    row: row,\n                    cell: cell,\n                    selected : true,\n                    columnName : columnName\n                }\n            );\n        }\n\n        for( let i = this.cellRange.startRow; i < this.cellRange.endRow+1; i++){\n            for(let j= this.cellRange.startCell; j < this.cellRange.endCell+1; j++){\n                this.selectionSet.push(\n                    {\n                        row: i,\n                        cell: j,\n                        selected : true,\n                        columnName : columnName\n                    }\n                );\n            }\n        }\n\n        // handle single cell as start and end\n\n        if(this.selectionSet.length === 2){\n            if( this.selectionSet[0].row === this.selectionSet[1].row && this.selectionSet[0].cell === this.selectionSet[1].cell  ){\n                this.selectionSet.splice(1,1);\n            }\n        }\n\n        this.setState({\n            selectionSet : this.selectionSet,\n            checkedRows : this._checkedRows\n        });\n\n        console.log(\"this.selectionSet: \", this.selectionSet);\n        console.log(\"this.state.selectionSet: \", this.state.selectionSet);\n\n        if(this.props.selectionCallback !== undefined && this.props.selectionCallback !== null){\n           type iSelectedItems = { row : number, cells : number[], productFields : iDataGridItem[] };\n            let selectedItems : iSelectedItems[] = [  ];\n            let lastRow : number = 0;\n\n            // work through the selection set to organize things\n           i: for(let i=0; i < this.selectionSet.length; i++){\n                if(i===0){\n                    //if it's the first one let's create a new entry\n                    lastRow = this.selectionSet[0].row;\n                    let newItem : iSelectedItems = { row : lastRow, cells:[], productFields : []};\n                    selectedItems.push(newItem);\n                }\n\n                //loop over the existing list of rows to create new ones\n                    if(this.selectionSet[i].row === lastRow){\n                        //one more loop over the list to grab all the cells that belong to the row\n                        if(selectedItems[selectedItems.length-1].cells.length === 0){\n                            for(let j=0; j < this.selectionSet.length; j++){\n                                if(this.selectionSet[j].row === lastRow){\n                                    //if the row matches the last row, then push in the selected cell\n                                    selectedItems[selectedItems.length-1].cells.push( this.selectionSet[j].cell );\n                                }\n                            }\n                        }\n\n                    }else{\n                        lastRow = this.selectionSet[i].row;\n                        let newItem : iSelectedItems = { row : lastRow, cells:[], productFields : []};\n                        selectedItems.push(newItem);\n                    }\n            }\n\n\n           for(let x=0; x < selectedItems.length; x++){\n                for(let y=0; y < this.props.data[selectedItems[x].row-2].length; y++){\n                    selectedItems[x].productFields.push(this.props.data[selectedItems[x].row-2][y] )\n                }\n\n           }\n\n            console.log(\"selection set: \", this.state.selectionSet);\n            console.log(\"inner callback\", selectedItems[0]);\n            this.props.selectionCallback(selectedItems, this._checkedRows, \"standard-launch\");\n        }\n    }\n\n    clearSelection(){\n        this.setState({selectionSet:[], checkedRows:[]});\n        this._checkedRows = [];\n        this.selectionSet = [];\n    }\n\n    checkSelected(row:number, cell:number):selectedStateType{\n        for(let i=0; i<this.state.selectionSet.length; i++){\n            if( this.state.selectionSet[i].row === row && this.state.selectionSet[i].cell === cell){\n                return \"selected\";\n            }\n        }\n        //if nothing is found, return false because it isn't selected\n        return \"\";\n    }\n\n    getNumColumns(){\n        //TODO swap this out to calculating total normalized columns\n\n        return appColumns.getColumns().length;\n    }\n\n    getNumRows(){\n        return this.props.data.length;\n    }\n\n    getProductUniqueID(index : number){\n\n        for(let j=0; j < this.props.data[index].length; j++){\n            if(this.props.data[index][j].column === \"uniqueID\"){\n                return this.props.data[index][j].value;\n            }\n        }\n    }\n\n    mouseDownAction(row : number, cell:number){\n        this.startSelectionCell = cell;\n        this.startSelectionRow = row;\n    }\n\n    mouseUpAction(row:number, cell:number, columnName : string){\n        console.log(\"@@@check\", row, \" \", cell, \" \", columnName);\n        this.manageSelection(row, cell, columnName, true);\n    }\n\n    manageCheckbox(row : number){\n\n\n        //find if this number is in the list\n        let found : boolean = false;\n\n\n        for(let i=0; i < this._checkedRows.length; i++){\n\n\n            if(this._checkedRows[i] === row){\n                //if it is in the list remove it which unchecks\n                this._checkedRows.splice(i, 1);\n                this.setState({checkedRows : this._checkedRows});\n                found = true;\n\n            }\n        }\n        if(found === false){\n            this._checkedRows.push(row);\n            this.setState({checkedRows : this._checkedRows});\n\n        }\n\n\n\n\n\n\n        //handle selecting the checked\n        //First reset the cell selection\n        this.selectionSet = [];\n\n        for(let i=0; i < this._checkedRows.length; i++){\n            for(let j=0; j < this.props.data[this._checkedRows[i]-1].length; j++ ){\n                let selectedCell : selectionObject = {\n                    row : this._checkedRows[i]+1,\n                    cell : j,\n                    selected : true,\n                    columnName : appColumns.getColumns()[i+1].columnName\n                };\n                this.selectionSet.push(selectedCell);\n            }\n        }\n\n\n\n        this.setState({selectionSet : this.selectionSet});\n        if(this.props.selectionCallback !== undefined){\n            this.props.selectionCallback(this.state.selectionSet, this.state.checkedRows, \"checkbox-launched\");\n        }\n        //once people use the tool, we can hide the tool tip\n        toolTipContent.showSelectRow = false;\n    }\n\n    iconCheck = (row : number):string=>{\n        for(let i=0; i < this.state.checkedRows.length; i++){\n            if(row === this.state.checkedRows[i]){\n                return \"checkbox-checked\"\n            }\n        }\n        return \"checkbox-unchecked\"\n    };\n\n    updateSelectionState = ()=>{\n        this.setState({selectionSet : this.selectionSet});\n\n    };\n\n    getGridItems(){\n        let cells : ReactElement[] = [];\n        for(let i=0; i < this.props.data.length; i++){\n            for(let j=0; j < this.props.data[i].length; j++){\n                if(j === 0){\n                    cells.push(\n                        <div className=\"cell checkbox-main\" style={{gridColumn : j+1, gridRow : i+2, zIndex : 100 + (this.numRows - i) }}>\n                            <AppButton\n                                OnClick={()=>this.manageCheckbox(i+1)}\n                                buttonType=\"transparent-bg\"\n                                tooltipType=\"custom\"\n                                tooltip={toolTipContent.selectRow()}\n                                classes={`${this.iconCheck(i+1)}`}\n                                iconCenter={(\n                                    <CatmanIcon\n                                        iconName={`${this.iconCheck(i+1)}`}\n                                        width=\"0.5rem\"\n                                        height=\"100%\"\n                                    />\n                                )}\n                            />\n                        </div>\n                    )\n                }\n\n                let cell = (\n                    <div className=\"cell\" style={{gridColumn : j+2, gridRow : i+2 }}>\n                        <Tile\n                            tileType={this.props.columns[j].control}\n                            tileLabel={this.props.data[i][j].value}\n                            mouseDownActions={\n                                [() => this.mouseDownAction(i+2,j+2)]\n                            }\n                            mouseUpActions={\n                                [\n                                    () => this.props.manageParentViews(),\n                                    () => this.mouseUpAction(i+2,j+2, appColumns.getColumns()[j].columnName)\n                                ]\n                            }\n                            selectedClass={this.checkSelected(i+2, j+2)}\n                        />\n                    </div>\n                );\n\n\n                if(this.props.columns[j].control != \"hidden\"){\n                    cells.push(cell);\n                }\n\n                if(j === this.props.data[i].length-1){\n                    cells.push(\n                        <div className=\"cell details\" style={{gridColumn : j+3, gridRow : i+2, zIndex : 100 + (this.numRows - i) }}>\n                            <AppButton\n                                buttonType=\"nav-link\"\n                                navPath={`/catalog/spreadsheet?product=${this.getProductUniqueID(i)}`}\n                                tooltipType=\"custom\"\n                                tooltip={toolTipContent.singleProduct()}\n                                iconCenter={(\n                                    <CatmanIcon\n                                        iconName=\"go-arrow\"\n                                        width=\"1rem\"\n                                        height=\"100%\"\n                                    />\n                                )}\n                            />\n                        </div>\n                    )\n                }\n            }\n        }\n\n        return cells;\n    }\n\n    getColumnHeaders(){\n        let columnsHeads : ReactElement[] = [];\n        for(let i=0; i < this.props.columns.length; i++ ){\n            if(i === 0){\n                columnsHeads.push(\n                    <div className=\"cell checkbox-main grid-header\" style={{gridColumn : i+1, gridRow : 1, zIndex : 100 + (this.numRows - i) }}>\n                        <AppButton\n                            OnClick={()=>this.manageCheckbox(i)}\n                            buttonType=\"transparent-bg\"\n                            tooltipType=\"custom\"\n                            tooltip={toolTipContent.selectRow()}\n                            classes={` `}\n                            iconCenter={(\n                                <CatmanIcon\n                                    iconName={`${this.iconCheck(i)}`}\n                                    width=\"0.5rem\"\n                                    height=\"100%\"\n                                />\n                            )}\n                        />\n                    </div>\n                )\n            }\n            let columnHead = (\n                <div className=\"cell grid-header\" style={{gridColumn : i+2, gridRow : 1, zIndex: this.numRows+10 }}>\n                    <Tile\n                        tileType=\"text-input\"\n                        tileLabel={this.props.columns[i].columnLabel}\n                        mouseDownActions={\n                            [ ]\n                        }\n                        mouseUpActions={\n                            [\n                                () => this.props.manageParentViews()\n                            ]\n                        }\n                        selectedClass={\"\"}\n                    />\n                </div>\n            );\n\n            if(this.props.columns[i].control != \"hidden\"){\n                columnsHeads.push(columnHead);\n            }\n\n\n            //final column head action\n            if(i === this.props.columns.length-1){\n                columnsHeads.push(\n                    <div className=\"cell details grid-header\"\n                         style={{gridColumn : this.props.columns.length+2, gridRow : 1, zIndex : 100 + (this.numRows - i) }}\n                        >\n                        <AppButton\n                            buttonType=\"nav-link\"\n                            navPath={`/catalog/spreadsheet`}\n                            tooltipType=\"custom\"\n                            tooltip={toolTipContent.singleProduct()}\n                            iconCenter={(\n                                <CatmanIcon\n                                    iconName=\"go-arrow\"\n                                    width=\"1rem\"\n                                    height=\"100%\"\n                                />\n                            )}\n                        />\n                    </div>\n                )\n            }\n\n\n\n        }\n\n\n\n        return( columnsHeads );\n    }\n\n    render(): React.ReactElement<any, string | React.JSXElementConstructor<any>> | string | number | {} | React.ReactNodeArray | React.ReactPortal | boolean | null | undefined {\n\n        let columnHeaders : ReactElement[] = this.getColumnHeaders();\n\n\n        //having some trouble with layout of grid and checkboxes\n        // style={{gridTemplateColumns : `1.5rem repeat(${this.getNumColumns().toString()}, max-content) 1rem`}}\n        let constructedGrid : ReactElement = (\n            <>\n                <div className={`data-grid ${this.props.classes}`}>\n                    <div className=\"viewport\">\n                        {columnHeaders}\n                        {this.getGridItems()}\n                    </div>\n                </div>\n            </>\n        );\n\n        return constructedGrid;\n    }\n}"]},"metadata":{},"sourceType":"module"}