{"ast":null,"code":"import _inherits from\"/Users/hr145a/Documents/WayfairCodeBases/CatMan/catmen-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/hr145a/Documents/WayfairCodeBases/CatMan/catmen-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _classCallCheck from\"/Users/hr145a/Documents/WayfairCodeBases/CatMan/catmen-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/hr145a/Documents/WayfairCodeBases/CatMan/catmen-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import*as React from\"react\";import{win}from\"../../index\";import ReactDOM from\"react-dom\";export var WindowLevelCapture=/*#__PURE__*/function(){function WindowLevelCapture(){_classCallCheck(this,WindowLevelCapture);this.mousePosition=void 0;this.mousePosition={x:-1000,y:-1000};}_createClass(WindowLevelCapture,[{key:\"getMousePosition\",value:function getMousePosition(evt){this.mousePosition={x:evt.clientX,y:evt.clientY};}},{key:\"windowSize\",value:function(_windowSize){function windowSize(){return _windowSize.apply(this,arguments);}windowSize.toString=function(){return _windowSize.toString();};return windowSize;}(function(){var measurment={width:window.innerWidth,height:window.innerHeight};return measurment;})},{key:\"windowEvent\",value:function windowEvent(){var _this=this;window.addEventListener('mousemove',function(evt){return _this.getMousePosition(evt);});}},{key:\"clearPortals\",value:function clearPortals(){var portals=document.getElementsByClassName(\"tool-tip\");console.log(\"clear portals\",portals);if(portals!=null){for(var i=0;i<portals.length;i++){var parent=portals[i].parentNode;if(parent!=null){parent.removeChild(portals[i]);}}}portals=document.getElementsByClassName(\"tool-tip\");console.log(\"clear portals after clear:\",portals);}},{key:\"mousePos\",get:function get(){return this.mousePosition;}}]);return WindowLevelCapture;}();export var ToolTip=/*#__PURE__*/function(_React$Component){_inherits(ToolTip,_React$Component);var _super=_createSuper(ToolTip);function ToolTip(props){var _this2;_classCallCheck(this,ToolTip);_this2=_super.call(this,props);_this2.mousePosition=void 0;_this2.initialized=void 0;_this2.toolTipTimeOutCounter=void 0;_this2.toolTipContainerRef=void 0;_this2.tooltipWidth=0;_this2.tooltipHeight=0;_this2.tooltipTop=0;_this2.tooltipLeft=0;_this2.intervalID=0;_this2.state={mousePosition:{x:-window.innerWidth,y:-window.innerHeight},isHovering:false};_this2.toolTipContainerRef=React.createRef();_this2.mousePosition={x:-1000,y:-1000};_this2.initialized=false;_this2.toolTipTimeOutCounter=_this2.props.timeoutInMS;return _this2;}//TODO give mouse position a data type\n_createClass(ToolTip,[{key:\"updateMousePos\",value:function updateMousePos(){var _this3=this;//Only update if the mouse is moving, check if position values have changed\nif(this.mousePosition.x!==win.mousePos.x&&this.mousePosition.y!==win.mousePos.y){this.setState({mousePosition:{x:win.mousePos.x,y:win.mousePos.y}});// console.log(\"state changed\", \"x:\", this.state.mousePosition.x, \"y: \", this.state.mousePosition.y);\n}var checkMouseIsOver=function checkMouseIsOver(){var _this3$props$btnRefer;var hoverCheck=true;if(((_this3$props$btnRefer=_this3.props.btnReference)===null||_this3$props$btnRefer===void 0?void 0:_this3$props$btnRefer.current)!==undefined){var _this3$props$btnRefer2,_this3$props$btnRefer3;var rect=(_this3$props$btnRefer2=_this3.props.btnReference)===null||_this3$props$btnRefer2===void 0?void 0:(_this3$props$btnRefer3=_this3$props$btnRefer2.current)===null||_this3$props$btnRefer3===void 0?void 0:_this3$props$btnRefer3.getBoundingClientRect();// if mouse is too far the the left, the mouse x is less that the button x\nif(rect!==undefined){if(_this3.state.mousePosition.x<rect.x){hoverCheck=false;}// if mouse is too far to the right\nif(_this3.state.mousePosition.x>rect.x+(rect===null||rect===void 0?void 0:rect.width)){hoverCheck=false;}// if mouse is too far the the left, the mouse x is less that the button x\nif(_this3.state.mousePosition.y<rect.y){hoverCheck=false;}// if mouse is too far to the right\nif(_this3.state.mousePosition.y>rect.y+(rect===null||rect===void 0?void 0:rect.height)){hoverCheck=false;}}}return hoverCheck;};if(checkMouseIsOver()===false){this.clearHover();}else{var yPos=win.mousePos.y;var xPos=win.mousePos.x;if(this.toolTipContainerRef.current!=null&&this.toolTipContainerRef.current!=undefined){this.tooltipWidth=this.toolTipContainerRef.current.getElementsByClassName(\"tt-element-main\")[0].getBoundingClientRect().width;this.tooltipHeight=this.toolTipContainerRef.current.getElementsByClassName(\"tt-element-main\")[0].getBoundingClientRect().height;this.tooltipTop=this.toolTipContainerRef.current.getBoundingClientRect().top;this.tooltipLeft=this.toolTipContainerRef.current.getBoundingClientRect().left;}//null check\nif(this.toolTipContainerRef.current!=null&&this.toolTipContainerRef.current!==undefined){//if it's too far to the right\nconsole.log(\"tooltip left:\",win.mousePos.x);if(win.mousePos.x+this.tooltipWidth>win.windowSize().width-this.tooltipWidth){xPos=xPos-(this.tooltipWidth+30);if(this.props.xOffset!=null){yPos-=this.props.xOffset;}}//if it's too close to bottom\nif(win.mousePos.y>win.windowSize().height-this.tooltipHeight){yPos=yPos-this.tooltipHeight;if(this.props.yOffset!=null){yPos=yPos-this.props.yOffset;}}this.setState({mousePosition:{x:xPos,y:yPos}});}this.setState({isHovering:true});}if(this.toolTipTimeOutCounter<=0){this.clearHover();}}},{key:\"getToolTip\",value:function getToolTip(){var _this$props$tooltipSt,_this$props$tooltipSt2;var tooltipInner=/*#__PURE__*/React.createElement(React.Fragment,null);switch(this.props.tooltipType){case\"standard\":tooltipInner=/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"app-tool-tip \"},/*#__PURE__*/React.createElement(\"h3\",null,(_this$props$tooltipSt=this.props.tooltipStandardContent)===null||_this$props$tooltipSt===void 0?void 0:_this$props$tooltipSt.headerText),/*#__PURE__*/React.createElement(\"p\",null,(_this$props$tooltipSt2=this.props.tooltipStandardContent)===null||_this$props$tooltipSt2===void 0?void 0:_this$props$tooltipSt2.copy)));break;case\"custom\":tooltipInner=/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"app-tool-tip\",style:{top:this.state.mousePosition.y,left:this.state.mousePosition.x,paddingLeft:\"1rem\"}},this.props.toolTipCustomElement));break;case\"none\":tooltipInner=/*#__PURE__*/React.createElement(React.Fragment,null);}return/*#__PURE__*/React.createElement(\"div\",{ref:this.toolTipContainerRef,style:{zIndex:10000,border:\"none\",width:\"1px\",height:\"1px\",position:\"fixed\"}},tooltipInner);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.clearHover();this.clearInterval();}},{key:\"clearPortals\",value:function clearPortals(){win.clearPortals();}},{key:\"clearInterval\",value:function(_clearInterval){function clearInterval(){return _clearInterval.apply(this,arguments);}clearInterval.toString=function(){return _clearInterval.toString();};return clearInterval;}(function(){clearInterval(this.intervalID);})},{key:\"startHover\",value:function startHover(){var _this4=this;this.toolTipTimeOutCounter=this.props.timeoutInMS;if(this.props.tooltipType!==\"none\"){this.intervalID=setInterval(function(){if(_this4.initialized===false){_this4.initialized=true;_this4.setState({isHovering:true});}_this4.toolTipTimeOutCounter-=50;if(_this4.toolTipTimeOutCounter<=0){_this4.clearHover();}_this4.updateMousePos();},50);}}},{key:\"clearHover\",value:function clearHover(){clearInterval(this.intervalID);this.initialized=false;this.setState({isHovering:false});//TODO revisit this optimization so we don't get too many tool tip containers\n// this.clearPortals();\n}},{key:\"componentDidMount\",value:function componentDidMount(){//this.startHover();\n}},{key:\"handleFadeInOut\",value:function handleFadeInOut(){if(this.toolTipTimeOutCounter<=800&&this.toolTipTimeOutCounter>700){return\"fade-1\";}else if(this.toolTipTimeOutCounter<=700&&this.toolTipTimeOutCounter>600){return\"fade-11\";}else if(this.toolTipTimeOutCounter<=600&&this.toolTipTimeOutCounter>500){return\"fade-2\";}else if(this.toolTipTimeOutCounter<=500&&this.toolTipTimeOutCounter>400){return\"fade-21\";}else if(this.toolTipTimeOutCounter<=400&&this.toolTipTimeOutCounter>300){return\"fade-3\";}else if(this.toolTipTimeOutCounter<=300&&this.toolTipTimeOutCounter>200){return\"fade-31\";}else if(this.toolTipTimeOutCounter<=200&&this.toolTipTimeOutCounter>100){return\"fade-4\";}else if(this.toolTipTimeOutCounter<=100&&this.toolTipTimeOutCounter>20){return\"fade-41\";}else if(this.toolTipTimeOutCounter<20&&this.toolTipTimeOutCounter>0){return\"fade-5\";}//HANDLE FADE IN\nif(this.toolTipTimeOutCounter<=this.props.timeoutInMS&&this.toolTipTimeOutCounter>this.props.timeoutInMS-100){return\"fade-5\";}else if(this.toolTipTimeOutCounter<=this.props.timeoutInMS-100&&this.toolTipTimeOutCounter>this.props.timeoutInMS-150){return\"fade-41\";}else if(this.toolTipTimeOutCounter<=this.props.timeoutInMS-150&&this.toolTipTimeOutCounter>this.props.timeoutInMS-200){return\"fade-4\";}else if(this.toolTipTimeOutCounter<=this.props.timeoutInMS-200&&this.toolTipTimeOutCounter>this.props.timeoutInMS-250){return\"fade-31\";}else if(this.toolTipTimeOutCounter<=this.props.timeoutInMS-250&&this.toolTipTimeOutCounter>this.props.timeoutInMS-300){return\"fade-3\";}else if(this.toolTipTimeOutCounter<=this.props.timeoutInMS-300&&this.toolTipTimeOutCounter>this.props.timeoutInMS-350){return\"fade-21\";}else if(this.toolTipTimeOutCounter<=this.props.timeoutInMS-350&&this.toolTipTimeOutCounter>this.props.timeoutInMS-400){return\"fade-2\";}else if(this.toolTipTimeOutCounter<=this.props.timeoutInMS-400&&this.toolTipTimeOutCounter>this.props.timeoutInMS-450){return\"fade-11\";}else if(this.toolTipTimeOutCounter<=this.props.timeoutInMS-450&&this.toolTipTimeOutCounter>this.props.timeoutInMS-500){return\"fade-0\";}}},{key:\"debugPosition\",value:function debugPosition(){return/*#__PURE__*/React.createElement(\"p\",{style:{position:\"fixed\",top:0,right:0}},\"x: \".concat(this.state.mousePosition.x,\" y: \").concat(this.state.mousePosition.y,\" \"));}},{key:\"render\",value:function render(){var tooltip=/*#__PURE__*/React.createElement(React.Fragment,null);if(this.state.isHovering===true&&this.toolTipTimeOutCounter>0){tooltip=this.getToolTip();}var root=function root(){var root=document.getElementById(\"root\");if(root!=null){return root;}};var constructedToolTip=/*#__PURE__*/React.createElement(\"span\",{id:\"tooltipPortal\",className:\"\".concat(this.handleFadeInOut(),\" tool-tip\")},tooltip);return ReactDOM.createPortal(constructedToolTip,root());}}]);return ToolTip;}(React.Component);","map":{"version":3,"sources":["/Users/hr145a/Documents/WayfairCodeBases/CatMan/catmen-client/src/view-components/heru-tool-tip/tool-tip.tsx"],"names":["React","win","ReactDOM","WindowLevelCapture","mousePosition","x","y","evt","clientX","clientY","measurment","width","window","innerWidth","height","innerHeight","addEventListener","getMousePosition","portals","document","getElementsByClassName","console","log","i","length","parent","parentNode","removeChild","ToolTip","props","initialized","toolTipTimeOutCounter","toolTipContainerRef","tooltipWidth","tooltipHeight","tooltipTop","tooltipLeft","intervalID","state","isHovering","createRef","timeoutInMS","mousePos","setState","checkMouseIsOver","hoverCheck","btnReference","current","undefined","rect","getBoundingClientRect","clearHover","yPos","xPos","top","left","windowSize","xOffset","yOffset","tooltipInner","tooltipType","tooltipStandardContent","headerText","copy","paddingLeft","toolTipCustomElement","zIndex","border","position","clearInterval","clearPortals","setInterval","updateMousePos","right","tooltip","getToolTip","root","getElementById","constructedToolTip","handleFadeInOut","createPortal","Component"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport {win} from \"../../index\";\nimport { ReactElement, RefObject} from \"react\";\nimport ReactDOM from \"react-dom\";\n\n\ninterface iMousePos{\n    x:number;\n    y:number;\n}\n\ninterface iWindow{\n\n}\n\nexport type windowSize = {\n    height : number;\n    width : number;\n}\nexport class WindowLevelCapture implements iWindow{\n    private mousePosition : iMousePos;\n    constructor() {\n        this.mousePosition = {x:-1000,y:-1000};\n    }\n\n    get mousePos(){\n        return this.mousePosition;\n    }\n\n    getMousePosition(evt:MouseEvent){\n        this.mousePosition = { x : evt.clientX, y : evt.clientY};\n    }\n\n    windowSize(){\n        let measurment : windowSize = {width: window.innerWidth, height: window.innerHeight}\n        return measurment;\n    }\n\n    windowEvent(){\n        window.addEventListener('mousemove',\n            (evt)=>this.getMousePosition(evt) )\n    }\n\n    clearPortals(){\n        let portals : HTMLCollectionOf<Element> = document.getElementsByClassName(\"tool-tip\");\n\n       console.log(\"clear portals\", portals);\n\n        if(portals != null){\n            for(let i=0; i < portals.length; i++ ){\n                let parent = portals[i].parentNode;\n                if(parent != null){\n                    parent.removeChild(portals[i])\n                }\n            }\n        }\n\n        portals = document.getElementsByClassName(\"tool-tip\");\n        console.log(\"clear portals after clear:\", portals);\n    }\n}\n\nexport type toolTipType = \"standard\" | \"custom\" | \"none\";\n\ninterface iPROPS{\n    tooltipType? : toolTipType;\n    tooltipStandardContent? : {\n        headerText : string,\n        copy : string\n    }\n    toolTipCustomElement? : ReactElement;\n    btnReference? : RefObject<HTMLButtonElement>;\n    linkReference? : RefObject<HTMLAnchorElement>;\n    timeoutInMS : number;\n    yOffset? : number;\n    xOffset? : number;\n}\n\ninterface iSTATE {\n    mousePosition : {\n        x : number,\n        y : number\n    };\n    isHovering : boolean;\n}\n\nexport class ToolTip extends React.Component<iPROPS, iSTATE>{\n    constructor(props:iPROPS) {\n        super(props);\n        this.state ={\n            mousePosition : {x:-window.innerWidth, y:-window.innerHeight},\n            isHovering : false\n        };\n        this.toolTipContainerRef = React.createRef<HTMLDivElement>();\n        this.mousePosition = { x:-1000, y:-1000};\n        this.initialized = false;\n        this.toolTipTimeOutCounter = this.props.timeoutInMS\n    }\n\n    //TODO give mouse position a data type\n    mousePosition : any;\n    initialized : boolean;\n    toolTipTimeOutCounter : number;\n    toolTipContainerRef : React.RefObject<HTMLDivElement>;\n    tooltipWidth : number = 0;\n    tooltipHeight : number = 0;\n    tooltipTop : number = 0;\n    tooltipLeft : number = 0;\n\n    private intervalID : any = 0;\n\n    updateMousePos(){\n        //Only update if the mouse is moving, check if position values have changed\n\n        if(this.mousePosition.x !== win.mousePos.x && this.mousePosition.y !== win.mousePos.y){\n            this.setState(\n                {\n                    mousePosition: {\n                        x: win.mousePos.x,\n                        y: win.mousePos.y\n                    }\n                });\n\n          // console.log(\"state changed\", \"x:\", this.state.mousePosition.x, \"y: \", this.state.mousePosition.y);\n        }\n\n        let checkMouseIsOver = ()=>{\n            let hoverCheck : boolean = true;\n            if(this.props.btnReference?.current !== undefined){\n                let rect = this.props.btnReference?.current?.getBoundingClientRect();\n                // if mouse is too far the the left, the mouse x is less that the button x\n                if(rect !== undefined){\n                    if(this.state.mousePosition.x < rect.x  ){\n                        hoverCheck = false;\n                    }\n\n                    // if mouse is too far to the right\n                    if(this.state.mousePosition.x > (rect.x + rect?.width) ){\n                        hoverCheck = false\n                    }\n\n                    // if mouse is too far the the left, the mouse x is less that the button x\n                    if(this.state.mousePosition.y < rect.y ){\n                        hoverCheck = false;\n                    }\n\n                    // if mouse is too far to the right\n                    if(this.state.mousePosition.y > (rect.y + rect?.height) ){\n                        hoverCheck = false\n                    }\n                }\n\n            }\n            return hoverCheck;\n        };\n\n        if(checkMouseIsOver() === false){\n            this.clearHover();\n        }else{\n            let yPos = win.mousePos.y;\n            let xPos = win.mousePos.x;\n            if(this.toolTipContainerRef.current != null && this.toolTipContainerRef.current != undefined  ){\n                this.tooltipWidth = this.toolTipContainerRef.current.getElementsByClassName(\"tt-element-main\")[0].getBoundingClientRect().width;\n                this.tooltipHeight = this.toolTipContainerRef.current.getElementsByClassName(\"tt-element-main\")[0].getBoundingClientRect().height;\n                this.tooltipTop = this.toolTipContainerRef.current.getBoundingClientRect().top;\n                this.tooltipLeft = this.toolTipContainerRef.current.getBoundingClientRect().left;\n\n            }\n\n\n            //null check\n            if(this.toolTipContainerRef.current != null && this.toolTipContainerRef.current !== undefined){\n                //if it's too far to the right\n                console.log(\"tooltip left:\", win.mousePos.x);\n                if( win.mousePos.x + this.tooltipWidth > win.windowSize().width - this.tooltipWidth){\n                    xPos = xPos - (this.tooltipWidth + 30);\n                    if(this.props.xOffset != null){\n                        yPos -= this.props.xOffset;\n                    }\n                }\n                //if it's too close to bottom\n                if(win.mousePos.y > win.windowSize().height - this.tooltipHeight){\n                    yPos = yPos - this.tooltipHeight;\n                    if(this.props.yOffset != null){\n                        yPos = yPos - this.props.yOffset;\n                    }\n                }\n                this.setState({mousePosition:{x:xPos, y:yPos}});\n            }\n\n            this.setState({isHovering : true})\n        }\n\n        if(this.toolTipTimeOutCounter <= 0){\n            this.clearHover();\n        }\n    }\n\n    getToolTip(){\n            let tooltipInner : ReactElement = (<></>);\n\n            switch(this.props.tooltipType){\n                case \"standard\":\n                    tooltipInner = (<>\n                        <div className=\"app-tool-tip \">\n                            <h3>{this.props.tooltipStandardContent?.headerText}</h3>\n                            <p>{this.props.tooltipStandardContent?.copy}</p>\n                        </div>\n                    </>);\n                    break;\n\n                case \"custom\":\n                    tooltipInner = (<>\n                        <div\n                            className=\"app-tool-tip\"\n                            style={\n                                {\n                                    top: this.state.mousePosition.y,\n                                    left: this.state.mousePosition.x,\n                                    paddingLeft:\"1rem\",\n                                }\n                            }\n                        >\n                            {this.props.toolTipCustomElement}\n                        </div>\n                    </>);\n                    break;\n                case \"none\":\n                    tooltipInner = (\n                        <></>\n                    )\n            }\n\n            return (\n                <div ref={this.toolTipContainerRef} style={{  zIndex: 10000, border: \"none\", width:\"1px\", height:\"1px\", position: \"fixed\"}} >\n                    {tooltipInner}\n                </div>\n            )\n\n    }\n\n    componentWillUnmount(): void {\n        this.clearHover();\n        this.clearInterval();\n    }\n\n    clearPortals(){\n        win.clearPortals();\n    }\n\n    clearInterval(){\n        clearInterval(this.intervalID);\n    }\n\n    startHover(){\n        this.toolTipTimeOutCounter = this.props.timeoutInMS;\n        if(this.props.tooltipType !== \"none\"){\n            this.intervalID = setInterval(\n                ()=>{\n                    if(this.initialized === false){\n                        this.initialized = true;\n                        this.setState({isHovering:true});\n\n                    }\n                    this.toolTipTimeOutCounter -= 50;\n                    if(this.toolTipTimeOutCounter <= 0){\n                        this.clearHover();\n                    }\n                    this.updateMousePos();\n                }, 50);\n        }\n    }\n\n    clearHover(){\n        clearInterval(this.intervalID);\n        this.initialized = false;\n        this.setState({isHovering:false} );\n        //TODO revisit this optimization so we don't get too many tool tip containers\n        // this.clearPortals();\n    }\n\n    componentDidMount(): void {\n        //this.startHover();\n    }\n\n    handleFadeInOut(){\n        if(this.toolTipTimeOutCounter <= 800 && this.toolTipTimeOutCounter > 700 ){\n            return \"fade-1\"\n        }else\n        if(this.toolTipTimeOutCounter <= 700 && this.toolTipTimeOutCounter > 600 ){\n            return \"fade-11\"\n        }else\n        if(this.toolTipTimeOutCounter <= 600 && this.toolTipTimeOutCounter > 500){\n            return \"fade-2\"\n        }else\n        if(this.toolTipTimeOutCounter <= 500 && this.toolTipTimeOutCounter > 400){\n            return \"fade-21\"\n        }else\n        if(this.toolTipTimeOutCounter <= 400 && this.toolTipTimeOutCounter > 300){\n            return \"fade-3\"\n        }else\n        if(this.toolTipTimeOutCounter <= 300 && this.toolTipTimeOutCounter > 200){\n            return \"fade-31\"\n        }else\n        if(this.toolTipTimeOutCounter <= 200 && this.toolTipTimeOutCounter > 100  ){\n            return \"fade-4\"\n        }else\n        if(this.toolTipTimeOutCounter <= 100 && this.toolTipTimeOutCounter > 20  ){\n            return \"fade-41\"\n        }else\n        if(this.toolTipTimeOutCounter < 20 && this.toolTipTimeOutCounter > 0  ){\n            return \"fade-5\"\n        }\n\n        //HANDLE FADE IN\n\n        if(this.toolTipTimeOutCounter <= this.props.timeoutInMS && this.toolTipTimeOutCounter > this.props.timeoutInMS-100 ){\n            return \"fade-5\"\n        }else if(this.toolTipTimeOutCounter <= this.props.timeoutInMS-100 && this.toolTipTimeOutCounter > this.props.timeoutInMS-150 ){\n            return \"fade-41\"\n        }else if(this.toolTipTimeOutCounter <= this.props.timeoutInMS-150 && this.toolTipTimeOutCounter > this.props.timeoutInMS-200){\n            return \"fade-4\"\n        }else if(this.toolTipTimeOutCounter <= this.props.timeoutInMS-200 && this.toolTipTimeOutCounter > this.props.timeoutInMS-250){\n            return \"fade-31\"\n        }else if(this.toolTipTimeOutCounter <= this.props.timeoutInMS-250 && this.toolTipTimeOutCounter > this.props.timeoutInMS-300){\n            return \"fade-3\"\n        }else if(this.toolTipTimeOutCounter <= this.props.timeoutInMS-300 && this.toolTipTimeOutCounter > this.props.timeoutInMS-350){\n            return \"fade-21\"\n        }else if(this.toolTipTimeOutCounter <= this.props.timeoutInMS-350 && this.toolTipTimeOutCounter > this.props.timeoutInMS-400  ){\n            return \"fade-2\"\n        }else if(this.toolTipTimeOutCounter <= this.props.timeoutInMS-400 && this.toolTipTimeOutCounter > this.props.timeoutInMS-450  ){\n            return \"fade-11\"\n        }else if(this.toolTipTimeOutCounter <= this.props.timeoutInMS-450 && this.toolTipTimeOutCounter > this.props.timeoutInMS-500  ){\n            return \"fade-0\"\n        }\n    }\n\n    debugPosition(){\n        return(\n            <p style={{position:\"fixed\", top:0, right:0}}>{`x: ${this.state.mousePosition.x} y: ${this.state.mousePosition.y} `}</p>\n        )\n    }\n\n\n\n    render(): React.ReactElement<any, string | React.JSXElementConstructor<any>> | string | number | {} | React.ReactNodeArray | React.ReactPortal | boolean | null | undefined {\n\n        let tooltip : ReactElement = (<></>);\n        if(this.state.isHovering === true && this.toolTipTimeOutCounter > 0){\n            tooltip = this.getToolTip();\n        }\n\n        const root = ()=>{\n             let root : any | HTMLElement = document.getElementById(\"root\");\n             if(root != null){\n                 return root;\n             }\n        } ;\n\n\n        let constructedToolTip = (\n              <span id=\"tooltipPortal\" className={`${this.handleFadeInOut()} tool-tip`}>{tooltip}</span>\n        );\n\n        return ReactDOM.createPortal(constructedToolTip, root());\n    }\n\n}"]},"metadata":{},"sourceType":"module"}